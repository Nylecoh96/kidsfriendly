function cspml_ajax_pagination(){jQuery(document).on("click","div[class^=cspml_pagination_] ul li a",function(t){t.preventDefault();var s=jQuery(this).closest("li").attr("data-map-id"),e=jQuery("div.cspml_listings_area_"+s+" input[name=init_post_ids]").val(),l=jQuery("div.cspml_listings_area_"+s+" input[name=count_init_post_ids]").val(),_=jQuery("div[id^="+s+"_listing_item_]").attr("data-view"),r=jQuery("ul.cspml_sort_list[data-map-id="+s+"] li.cspml_active").html(),n=jQuery("ul.cspml_sort_list[data-map-id="+s+"] li.cspml_active").attr("data-sort"),c=jQuery("ul.cspml_sort_list[data-map-id="+s+"] li.cspml_active").attr("data-order"),t=jQuery(this).attr("href");-1===t.indexOf("paginate=true")&&(t+="?paginate=true");var m="div.cspml_listings_area_"+s;jQuery(m).length?jQuery("html").animate({scrollTop:jQuery("div.cspml_list_and_filter_container[data-map-id="+s+"]").offset().top-200},function(){var t=jQuery(".cspml_listing_items_container[data-map-id="+s+"]");t.length&&"function"==typeof t.mCustomScrollbar&&t.mCustomScrollbar("scrollTo","top"),cspml_show_listings_animation(s)}):cspml_show_listings_animation(s),jQuery(m).load(t+" "+m,function(t,i,a){return jQuery("div.cspml_listings_area_"+s+" input[name=init_post_ids]").val(e),jQuery("div.cspml_listings_area_"+s+" input[name=count_init_post_ids]").val(l),"error"==i?alert("An error has been occurred. Please try again later: "+a.status+" "+a.statusText):"success"==i&&(jQuery(m).children(m).unwrap(),("grid"==_?cspml_grid_view_classes:cspml_list_view_classes)(s),jQuery("div.cspml_sort_list_container[data-map-id="+s+"] span.cspml_sort_val").empty().html(r),jQuery("li[data-map-id="+s+"][data-sort="+n+"][data-order="+c+"]").addClass("cspml_active"),cspml_hide_listings_animation(s)),!1})})}function cspml_filter_listings(a,s,t,e,l,i){var _=jQuery("div.cspml_listings_area_"+a+" input[name=shortcode_page_id]").val(),r=jQuery("div.cspml_listings_area_"+a+" input[name=page_template]").val(),n=jQuery("div.cspml_listings_area_"+a+" input[name=template_tax_query]").val(),c=jQuery("div.cspml_listings_area_"+a+" input[name=init_post_ids]").val(),m=jQuery("div.cspml_listings_area_"+a+" input[name=divider]").val(),p=jQuery("div.cspml_listings_area_"+a+" input[name=show_listings]").val(),d=jQuery("div.cspml_listings_area_"+a+" input[name=optional_latlng]").val(),o=jQuery("div[id^="+a+"_listing_item_]").attr("data-view"),u=jQuery("div.cspml_listings_area_"+a).attr("data-paginate-position"),v=jQuery("div.cspml_listings_area_"+a).attr("data-paginate-align"),g=jQuery("div.cspml_listings_area_"+a).attr("data-posts-per-page"),h=jQuery("div.cspml_listings_area_"+a).attr("data-map-type"),f=jQuery("div.cspml_listings_area_"+a+" input[name=shortcode_page_link]").val(),y=jQuery("ul.cspml_sort_list[data-map-id="+a+"] li.cspml_active").html(),j=jQuery("ul.cspml_sort_list[data-map-id="+a+"] li.cspml_active").attr("data-sort"),Q=jQuery("ul.cspml_sort_list[data-map-id="+a+"] li.cspml_active").attr("data-order"),f={action:"cspml_listings_html",map_id:a,shortcode_page_id:_,page_template:r,template_tax_query:n,divider:m,ajax_call:!0,current_view:o,paginate_position:u,paginate_align:v,posts_per_page:g,optional_latlng:d,map_settings:progress_map_vars.map_script_args[a].map_settings,request_type:i,shortcode_page_link:f,init_post_ids:c,post_ids:s};t&&(f.save_session=!0),l&&(f.reset_list=!0),jQuery.post(cspml_vars.ajax_url,f,function(t){var i;i=""==e?""!=c?s.length:"0":l&&"normal_map"!=h?"0":e,"true"==p&&(jQuery("div.cspml_listings_area_"+a).html(t),jQuery("span.cspml_the_count_"+a).empty().html(i),jQuery("div.cspml_sort_list_container[data-map-id="+a+"] span.cspml_sort_val").empty().html(y),jQuery("li[data-map-id="+a+"][data-sort="+j+"][data-order="+Q+"]").addClass("cspml_active"),"grid"==o&&cspml_grid_view_classes(a),cspml_hide_listings_animation(a))})}function cspml_show_listings_animation(t){jQuery("div#cspml_loading_container_"+t).fadeIn(),jQuery("div.cspml_listings_area_"+t+" div.cspml_item_holder").removeClass("cspm_animated fadeIn").animate({opacity:"0.5"}),jQuery("div.cspml_transparent_layer_"+t).show()}function cspml_hide_listings_animation(t){jQuery("div.cspml_listings_area_"+t+" div.cspml_item_holder").addClass("cspm_animated fadeIn"),jQuery("div#cspml_loading_container_"+t).fadeOut(),jQuery("div.cspml_transparent_layer_"+t).hide(),setTimeout(function(){cspml_adjust_list_content_height(t)},500)}function cspml_list_view_classes(t){jQuery("div.cspml_options_bar_"+t+" div.list_view a").removeClass("enabled"),jQuery("div.cspml_options_bar_"+t+" div.grid_view a").addClass("enabled");var i=jQuery("div#cspml_listings_container[data-map-id="+t+"]").attr("data-grid-cols");i="cols1"==i?"cspm-col-lg-12 cspm-col-md-12 cspm-col-sm-12 cspm-col-xs-12":"cols2"==i?"cspm-col-lg-6 cspm-col-md-6 cspm-col-sm-6 cspm-col-xs-12":"cols4"==i?"cspm-col-lg-3 cspm-col-md-3 cspm-col-sm-6 cspm-col-xs-12":"cols6"==i?"cspm-col-lg-2 cspm-col-md-2 cspm-col-sm-6 cspm-col-xs-12":"cspm-col-lg-4 cspm-col-md-4 cspm-col-sm-6 cspm-col-xs-12",jQuery("div[id^="+t+"_listing_item_]").addClass("cspm_animated fadeIn"),jQuery("div[id^="+t+"_listing_item_]").attr("data-view","list"),jQuery("div[id^="+t+"_listing_item_]").removeClass(i).addClass("cspm-row"),jQuery("div#list_view_holder_"+t).addClass("cspm-col-lg-12 cspm-col-xs-12 cspm-col-sm-12 cspm-col-md-12"),jQuery("div[id^="+t+"_listing_item_] .cspml_thumb_container").is(":visible")&&jQuery("div[id^="+t+"_listing_item_] .cspml_thumb_container").removeClass("cspm-col-lg-12 cspm-col-md-12 cspm-col-sm-12 cspm-col-xs-12").addClass("cspm-col-lg-5 cspm-col-md-5 cspm-col-sm-5 cspm-col-xs-12"),(jQuery("div[id^="+t+"_listing_item_] .cspml_thumb_container").is(":visible")?jQuery("div[id^="+t+"_listing_item_] div.cspml_details_container").removeClass("cspm-col-lg-12 cspm-col-md-12 cspm-col-sm-12 cspm-col-xs-12").addClass("cspm-col-lg-7 cspm-col-md-7 cspm-col-sm-7 cspm-col-xs-12"):jQuery("div[id^="+t+"_listing_item_] div.cspml_details_container")).attr("data-view","list"),jQuery("div[id^="+t+"_listing_item_] div.cspml_details_container .cspml_details_content").removeClass("grid"),setTimeout(function(){jQuery("div[id^="+t+"_listing_item_]").removeClass("cspm_animated fadeIn")},2e3)}function cspml_grid_view_classes(t){jQuery("div.cspml_options_bar_"+t+" div.grid_view a").removeClass("enabled"),jQuery("div.cspml_options_bar_"+t+" div.list_view a").addClass("enabled");var i=jQuery("div#cspml_listings_container[data-map-id="+t+"]").attr("data-grid-cols");i="cols1"==i?"cspm-col-lg-12 cspm-col-md-12 cspm-col-sm-12 cspm-col-xs-12":"cols2"==i?"cspm-col-lg-6 cspm-col-md-6 cspm-col-sm-6 cspm-col-xs-12":"cols4"==i?"cspm-col-lg-3 cspm-col-md-3 cspm-col-sm-6 cspm-col-xs-12":"cols6"==i?"cspm-col-lg-2 cspm-col-md-2 cspm-col-sm-6 cspm-col-xs-12":"cspm-col-lg-4 cspm-col-md-4 cspm-col-sm-6 cspm-col-xs-12",jQuery("div[id^="+t+"_listing_item_]").addClass("cspm_animated fadeIn"),jQuery("div[id^="+t+"_listing_item_]").attr("data-view","grid"),jQuery("div[id^="+t+"_listing_item_]").removeClass("cspm-row").addClass(i),jQuery("div#list_view_holder_"+t).removeClass("cspm-col-lg-12 cspm-col-xs-12 cspm-col-sm-12 cspm-col-md-12"),jQuery("div[id^="+t+"_listing_item_] .cspml_thumb_container").is(":visible")&&jQuery("div[id^="+t+"_listing_item_] .cspml_thumb_container").removeClass("cspm-col-lg-5 cspm-col-md-5 cspm-col-sm-5 cspm-col-xs-12").addClass("cspm-col-lg-12 cspm-col-md-12 cspm-col-sm-12 cspm-col-xs-12"),(jQuery("div[id^="+t+"_listing_item_] .cspml_thumb_container").is(":visible")?jQuery("div[id^="+t+"_listing_item_] div.cspml_details_container").removeClass("cspm-col-lg-7 cspm-col-md-7 cspm-col-sm-7 cspm-col-xs-12").addClass("cspm-col-lg-12 cspm-col-md-12 cspm-col-sm-12 cspm-col-xs-12"):jQuery("div[id^="+t+"_listing_item_] div.cspml_details_container")).attr("data-view","grid"),jQuery("div[id^="+t+"_listing_item_] div.cspml_details_container .cspml_details_content").addClass("grid"),setTimeout(function(){jQuery("div[id^="+t+"_listing_item_]").removeClass("cspm_animated fadeIn")},2e3)}function cspml_adjust_list_content_height(t){var i,a;null!==t?jQuery("div.cspml_thumb_container[data-map-id="+t+"]").is(":visible")&&(a=(i=jQuery("div.cspml_thumb_container[data-map-id="+t+"]").innerHeight())-jQuery("div.cspml_details_title[data-map-id="+t+"]").innerHeight()-40,"list"==jQuery("div.cspml_details_container[data-map-id="+t+"]").attr("data-view")?(jQuery("div.cspml_details_container[data-map-id="+t+"][data-view=list]").attr("style","height:"+i+"px;"),jQuery("div.cspml_details_container[data-map-id="+t+"][data-view=list] .cspml_details_content").attr("style","height:"+a+"px;")):(jQuery("div.cspml_details_container[data-map-id="+t+"]").removeAttr("style"),jQuery("div.cspml_details_container[data-map-id="+t+"] .cspml_details_content").removeAttr("style"))):jQuery("div[class^=cspml_listings_area_]").each(function(t){var i,a,s=jQuery(this).attr("data-map-id");jQuery("div.cspml_thumb_container[data-map-id="+s+"]").is(":visible")&&(a=(i=jQuery("div.cspml_thumb_container[data-map-id="+s+"]").innerHeight())-jQuery("div.cspml_details_title[data-map-id="+s+"]").innerHeight()-40,"list"==jQuery("div.cspml_details_container[data-map-id="+s+"]").attr("data-view")?(jQuery("div.cspml_details_container[data-map-id="+s+"][data-view=list]").attr("style","height:"+i+"px;"),jQuery("div.cspml_details_container[data-map-id="+s+"][data-view=list] .cspml_details_content").attr("style","height:"+a+"px;")):(jQuery("div.cspml_details_container[data-map-id="+s+"]").removeAttr("style"),jQuery("div.cspml_details_container[data-map-id="+s+"] .cspml_details_content").removeAttr("style")))})}function cspml_animate_list_item(t,i){var a,s=jQuery("div.cspml_item_holder[data-map-id="+t+"][data-post-id="+i+"]"),e=jQuery(s),l=e.attr("data-attr-scrollto");jQuery("div.cspml_item_holder[data-map-id="+t+"] .cspml_item").removeClass("cspml_active_item"),"yes"==l?e.length&&((a=jQuery(".cspml_listing_items_container[data-map-id="+t+"]")).length&&"function"==typeof a.mCustomScrollbar&&"yes"==a.attr("data-scrollable")?"vertical"==a.attr("data-list-layout")?(a.mCustomScrollbar("scrollTo",s),setTimeout(function(){jQuery("html").animate({scrollTop:jQuery("div.cspml_list_and_filter_container[data-map-id="+t+"]").offset().top-200},function(){jQuery("html").animate({scrollTop:e.offset().top},function(){setTimeout(function(){jQuery("div.cspml_item_holder[data-map-id="+t+"][data-post-id="+i+"] .cspml_item").addClass("cspml_active_item")},100)})})},500)):jQuery("html").animate({scrollTop:jQuery("div.cspml_list_and_filter_container[data-map-id="+t+"]").offset().top-200},function(){a.mCustomScrollbar("scrollTo",s),setTimeout(function(){jQuery("div.cspml_item_holder[data-map-id="+t+"][data-post-id="+i+"] .cspml_item").addClass("cspml_active_item")},100)}):jQuery("html").animate({scrollTop:e.offset().top-100},function(){setTimeout(function(){jQuery("div.cspml_item_holder[data-map-id="+t+"][data-post-id="+i+"] .cspml_item").addClass("cspml_active_item")},100)})):jQuery("div.cspml_item_holder[data-map-id="+t+"][data-post-id="+i+"] .cspml_item").addClass("cspml_active_item")}function cspml_reset_filter_fields(t,i){jQuery("form.cspml_filter_form[data-map-id="+t+"] input[type=radio]:checked, form.cspml_filter_form[data-map-id="+t+"] input[type=checkbox]:checked").each(function(){jQuery(this).prop("checked",!1).trigger("change"),jQuery(this).trigger("stateChanged")}),jQuery("form.cspml_filter_form[data-map-id="+t+"] input[type=text]").each(function(){jQuery(this).val("")});var a=jQuery("form.cspml_filter_form[data-map-id="+t+"] input.cspml_fs_slider_range");void 0!==a&&0<a.length&&("function"==typeof(a=a.data("ionRangeSlider")).reset&&a.reset());for(var i=jQuery("select.cspml_fs_selectize[data-map-id="+t+"]"),s=0;s<i.length;s++)i[s].selectize.clear();jQuery("span[id^=clear_date_range_][data-map-id="+t+"]").trigger("click")}!function(f){"use strict";void 0!==f.fn.datepicker&&(f.fn.cspmSyncDatepicker=f.fn.datepicker.noConflict()),f("div.cspml_fs_item_container input[type='radio'], div.cspml_fs_item_container input[type='checkbox']").ionCheckRadio(),f("select.cspml_fs_selectize").selectize(),f("input.cspml_fs_slider_range").ionRangeSlider({grid:!1,skin:"round",prettify_enabled:!0,keyboard:!0,decorate_both:!1,force_edges:!0});var l,i={autoHideScrollbar:!1,contentTouchScroll:!0,live:!0,mouseWheel:{enable:!0,preventDefault:!0},keyboard:{enable:!0},theme:"dark-2"};f("div.cspml_fs_container").each(function(t){f(this).attr("data-map-id");"yes"==f(this).attr("data-scrollable")&&(f(this).mCustomScrollbar("destroy"),f(this).mCustomScrollbar(i))}),f("div.cspml_listing_items_container").each(function(t){f(this).attr("data-map-id");"yes"==f(this).attr("data-scrollable")&&(f(this).mCustomScrollbar("destroy"),f(this).mCustomScrollbar(i))}),f("input[type=text].cspml_fs_number_field").spinner(),setTimeout(function(){f.each(f("a.cspml_reset_spinner"),function(){f(this).trigger("click")})},100),cspml_ajax_pagination(),cspml_adjust_list_content_height(null),f(document).on("click","div.cspml_fs_label span.cspml_toggle_btn",function(){var t=f(this).attr("data-map-id"),i=f(this).attr("data-field-name"),a=f(this).attr("data-display-location");f("div.cspml_fs_options_list[data-map-id="+t+"][data-field-name="+i+"][data-display-location="+a+"]").slideToggle("fast")}),f(document).on("click","a.cspml_reset_spinner",function(){var t=f(this).attr("data-map-id"),i=f(this).attr("data-field-name"),a=f(this).attr("data-display-location");f("div.cspml_fs_options_list[data-map-id="+t+"][data-display-location="+a+"] div.cspml_input_container input[type=text][name="+i+"]").val("")}),f.each(f(".cspml_input_symbol_after"),function(){var t=f(this).attr("data-map-id"),i=f(this).attr("data-field-name"),a=f(this).innerWidth();f("div.cspml_input_container").find("input[type=text][data-map-id="+t+'][name="'+i+'"]').attr("style","padding-right: "+(a+13)+"px !important;")}),f.each(f(".cspml_input_symbol_before"),function(){var t=f(this).attr("data-map-id"),i=f(this).attr("data-field-name"),a=f(this).innerWidth();f("div.cspml_input_container").find("input[type=text][data-map-id="+t+'][name="'+i+'"]').attr("style","padding-left: "+(a+13)+"px !important;")}),f(document).on("click","div.cspml_sort_list_container",function(){var t=f(this).attr("data-map-id");f("ul.cspml_sort_list[data-map-id="+t+"]").addClass("cspm_animated fadeIn").slideToggle(function(){f("ul.cspml_sort_list[data-map-id="+t+"]").mCustomScrollbar("destroy"),f("ul.cspml_sort_list[data-map-id="+t+"]").mCustomScrollbar({autoHideScrollbar:!0,mouseWheel:{enable:!0,preventDefault:!0},theme:"dark-2"})})}),f("ul.cspml_sort_list").each(function(t){var i=f(this).attr("data-map-id");f("ul.cspml_sort_list[data-map-id="+i+"] li").first().addClass("cspml_active")}),f(document).on("click","ul.cspml_sort_list li",function(){var i=f(this).attr("data-sort"),a=f(this).attr("data-order"),t=f(this).attr("data-type"),s=f(this).attr("data-map-id"),e=f("div#cspml_listings_container[data-map-id="+s+"]").attr("data-map-type"),l=f("div#cspml_listings_container[data-map-id="+s+"]").attr("data-first-load");if("normal_map"!=e&&"true"==l)return!1;f("ul.cspml_sort_list[data-map-id="+s+"] li").removeClass("cspml_active"),f(this).addClass("cspml_active"),f("ul.cspml_sort_list[data-map-id="+s+"]").fadeOut("fast");var _=f(this).html();f("div.cspml_sort_list_container[data-map-id="+s+"] span.cspml_sort_val").empty().html(_),cspml_show_listings_animation(s);var r=f("div.cspml_listings_area_"+s+" input[name=init_post_ids]").val(),n=f("div.cspml_listings_area_"+s+" input[name=post_ids]").val(),c=f("div.cspml_listings_area_"+s+" input[name=shortcode_page_id]").val(),m=f("div.cspml_listings_area_"+s+" input[name=divider]").val(),p=f("div[id^="+s+"_listing_item_]").attr("data-view"),d=f("div.cspml_listings_area_"+s+" input[name=page_template]").val(),o=f("div.cspml_listings_area_"+s+" input[name=template_tax_query]").val(),u=jQuery("div.cspml_listings_area_"+s+" input[name=optional_latlng]").val(),v=f("div.cspml_listings_area_"+s).attr("data-paginate-position"),g=f("div.cspml_listings_area_"+s).attr("data-paginate-align"),h=jQuery("div.cspml_listings_area_"+s).attr("data-posts-per-page"),e=jQuery("div.cspml_listings_area_"+s+" input[name=shortcode_page_link]").val(),l=jQuery(".cspml_listing_items_container[data-map-id="+s+"]");l.length&&"function"==typeof l.mCustomScrollbar&&l.mCustomScrollbar("scrollTo","top"),jQuery.post(cspml_vars.ajax_url,{action:"cspml_listings_html",map_id:s,data_sort:i,data_order:a,data_type:t,shortcode_page_id:c,post_ids:n,init_post_ids:r,divider:m,sort_call:!0,current_view:p,page_template:d,template_tax_query:o,paginate_position:v,paginate_align:g,posts_per_page:h,optional_latlng:u,map_settings:progress_map_vars.map_script_args[s].map_settings,request_type:"sort",shortcode_page_link:e},function(t){jQuery("html").animate({scrollTop:jQuery("div.cspml_list_and_filter_container[data-map-id="+s+"]").offset().top-200},function(){f("div.cspml_listings_area_"+s).html(t),"grid"==p&&cspml_grid_view_classes(s),f("div.cspml_sort_list_container[data-map-id="+s+"] span.cspml_sort_val").empty().html(_),f("li[data-map-id="+s+"][data-sort="+i+"][data-order="+a+"]").addClass("cspml_active"),cspml_hide_listings_animation(s)})})}),f(document).on("click","div.view_option a",function(){var t=f(this).attr("data-map-id"),i=f(this).attr("data-current-view"),a=f(this).attr("data-next-view");f(this).attr("data-current-view",a),f(this).attr("data-next-view",i);var s=f("div.view_option[data-map-id="+t+"] a").attr("title");f("div.view_option[data-map-id="+t+"] a").attr("title",s.replace(a,i)),"grid"==a?(cspml_grid_view_classes(t),f("div.view_option[data-map-id="+t+"] a svg.cspml_list_view").hide(),f("div.view_option[data-map-id="+t+"] a svg.cspml_grid_view").show()):"list"==a&&(cspml_list_view_classes(t),f("div.view_option[data-map-id="+t+"] a svg.cspml_grid_view").hide(),f("div.view_option[data-map-id="+t+"] a svg.cspml_list_view").show()),cspml_adjust_list_content_height(t)}),f(document).on("click","a.cspml_submit_listings_filter, a.cspml_mfs_submit_listings_filter",function(t){var e=f(this).attr("data-map-id"),l=f(this).attr("data-display-location"),a=f(this).attr("data-request-type"),i=f("div.cspml_listings_area_"+e+" input[name=init_post_ids]").val(),s=f("div[id^="+e+"_listing_item_]").attr("data-view"),_=f("div.cspml_listings_area_"+e+" input[name=shortcode_page_id]").val(),r=f("div.cspml_listings_area_"+e+" input[name=page_template]").val(),n=f("div.cspml_listings_area_"+e+" input[name=template_tax_query]").val(),c=f("div.cspml_listings_area_"+e+" input[name=show_listings]").val(),m=jQuery("div.cspml_listings_area_"+e+" input[name=shortcode_page_link]").val();"map"!=l?f("html").animate({scrollTop:jQuery("div.cspml_list_and_filter_container[data-map-id="+e+"]").offset().top-200},function(){var t=jQuery(".cspml_listing_items_container[data-map-id="+e+"]");t.length&&"function"==typeof t.mCustomScrollbar&&t.mCustomScrollbar("scrollTo","top"),cspml_show_listings_animation(e)}):("undefined"!=typeof NProgress&&(NProgress.configure({parent:"div#codespacing_progress_map_div_"+e,showSpinner:!0}),NProgress.start()),"true"==c&&cspml_show_listings_animation(e));var p={},d=[],o=[],u={};u[e]=[],f("form#cspml_"+l+"_filter_form[data-map-id="+e+"] input[type=text], form#cspml_"+l+"_filter_form[data-map-id="+e+"] input[type=radio]:checked, form#cspml_"+l+"_filter_form[data-map-id="+e+"] input[type=checkbox]:checked, form#cspml_"+l+"_filter_form[data-map-id="+e+"] select").each(function(){var t=void 0!==f(this).attr("name")&&f(this).attr("name").replace("[]","");if(t){t=f("form#cspml_"+l+"_filter_form[data-map-id="+e+"] input[name="+t+"_filter_type]").val();if((o=[]).push(t),-1<f(this).attr("name").indexOf("[]")){t=f(this).attr("name").split("[]");if((s=t[0])in p||(d=[]),2==t.length){if(void 0!==f(this).attr("value")&&-1<f(this).attr("value").indexOf(",")&&f(this).hasClass("cspml_show_all"))for(var i=f(this).attr("value").split(","),a=0;a<i.length;a+=1)d.push(i[a]);else d.push(f(this).val());p[s]=jQuery.merge(o,d)}else o.push(f(this).val()),p[f(this).attr("name")]=o}else{var s=f(this).attr("name");if(void 0!==f(this).attr("value")&&-1<f(this).attr("value").indexOf(",")&&f(this).hasClass("cspml_show_all")){for(i=f(this).attr("value").split(","),a=0;a<i.length;a+=1)d.push(i[a]);p[s]=jQuery.merge(o,d)}else""!=f(this).val()&&(o.push(f(this).val()),p[s]=o)}}}),jQuery.post(cspml_vars.ajax_url,{action:"cspml_faceted_search_query",map_id:e,init_post_ids:i,filter_args:p,filter_form_call:!0,current_view:s,shortcode_page_id:_,page_template:r,template_tax_query:n,map_settings:progress_map_vars.map_script_args[e].map_settings,request_type:a,shortcode_page_link:m},function(t){u[e]=JSON.parse(t);var i=f("div#codespacing_progress_map_div_"+e);0!=i.length&&cspm_hide_all_markers(i).done(function(){cspm_set_markers_visibility(i,e,null,0,post_ids_and_categories[e],u[e],!0),cspm_simple_clustering(i,e),0==u[e].length?cspm_recenter_map(i,e):i.gmap3({autofit:{}}),"yes"==progress_map_vars.map_script_args[e].show_posts_count&&f("span.the_count_"+e).empty().html(u[e].length),"undefined"!=typeof NProgress&&NProgress.done()}),"true"==c&&(cspml_filter_listings(e,u[e],!1,"",!1,a),f("div#cspml_listings_container[data-map-id="+e+"]").attr("data-first-load","false"))})}),f(document).on("click","a.cspml_reset_lsitings_filter, a.cspml_mfs_reset_lsitings_filter",function(){var i=f(this).attr("data-map-id"),t=f("div#codespacing_progress_map_div_"+i),a=f(this).attr("data-display-location"),s=f(this).attr("data-request-type"),e=f("div.cspml_listings_area_"+i+" input[name=init_post_ids]").val(),l=f("div.cspml_listings_area_"+i+" input[name=count_init_post_ids]").val(),_=f("div.cspml_listings_area_"+i+" input[name=shortcode_page_id]").val(),r=f("div.cspml_listings_area_"+i+" input[name=page_template]").val(),n=f("div.cspml_listings_area_"+i+" input[name=template_tax_query]").val(),c=f("div.cspml_listings_area_"+i+" input[name=show_listings]").val(),m=f("div#cspml_listings_container[data-map-id="+i+"]").attr("data-first-load"),p=jQuery("div.cspml_listings_area_"+i+" input[name=shortcode_page_link]").val();if("true"==m)return!1;"map"!=a?f("html").animate({scrollTop:jQuery("div.cspml_list_and_filter_container[data-map-id="+i+"]").offset().top-200},function(){var t=jQuery(".cspml_listing_items_container[data-map-id="+i+"]");t.length&&"function"==typeof t.mCustomScrollbar&&t.mCustomScrollbar("scrollTo","top"),cspml_show_listings_animation(i)}):cspml_show_listings_animation(i);var d={};d[i]=[],0!=t.length&&("search_map"==progress_map_vars.map_script_args[i].map_type?(cspm_hide_all_markers(t),cspm_simple_clustering(t,i)):(cspm_set_markers_visibility(t,i,null,0,post_ids_and_categories[i],d[i],!1),cspm_simple_clustering(t,i),t.gmap3({autofit:{}}),"yes"==progress_map_vars.map_script_args[i].show_posts_count&&f("span.the_count_"+i).empty().html(d[i].length)));jQuery.post(cspml_vars.ajax_url,{action:"cspml_faceted_search_query",map_id:i,init_post_ids:e,post_ids:d[i],filter_args:[],filter_form_call:!0,shortcode_page_id:_,page_template:r,template_tax_query:n,map_settings:progress_map_vars.map_script_args[i].map_settings,request_type:s,shortcode_page_link:p},function(t){cspml_reset_filter_fields(i),"true"==c&&(cspml_filter_listings(i,d[i],!0,l,!0,s),f("div#cspml_listings_container[data-map-id="+i+"]").attr("data-first-load","true"))}),f("form#search_form_"+i).is(":visible")&&(f("form#search_form_"+i+" input#cspm_address_"+i).val("").trigger("focus"),f("a.cspm_reset_search_form_"+i).removeClass("fadeIn").hide("fast"))}),f(document).on("click",".cspml_fire_pinpoint",function(){var t,i=f(this).attr("data-map-id"),a=f(this).attr("data-post-id"),s=f("div#codespacing_progress_map_div_"+i);0<s.length&&(s.gmap3("get"),t=f(this).attr("data-coords").split("_"),f("html").animate({scrollTop:f("div#codespacing_progress_map_div_"+i).offset().top-100},500,function(){cspm_center_map_at_point(s,i,t[0],t[1],"zoom"),setTimeout(function(){cspm_animate_marker(s,i,a)},200),"content_style"!=progress_map_vars.infowindow_type&&(f("div.marker_holder div.pin_overlay_content").removeClass("pin_overlay_content-active"),f("div#bubble_"+a+"_"+i+" div.pin_overlay_content").addClass("pin_overlay_content-active"))}))}).css("cursor","pointer"),f(document).on("mouseenter",".cspml_item_holder",function(){var t=f(this).attr("data-map-id"),i=f(this).attr("data-post-id"),a=f(this).attr("data-hover-fire"),s=f("div#codespacing_progress_map_div_"+t),e=(s.gmap3("get"),f(this).attr("data-coords").split("_"));"yes"==a&&0<s.length&&2==e.length&&(l=setTimeout(function(){cspm_center_map_at_point(s,t,e[0],e[1],"center"),setTimeout(function(){cspm_animate_marker(s,t,i)},200),"content_style"!=progress_map_vars.infowindow_type&&(f("div.marker_holder div.pin_overlay_content").removeClass("pin_overlay_content-active"),f("div#bubble_"+i+"_"+t+" div.pin_overlay_content").addClass("pin_overlay_content-active"))},500))}).on("mouseleave",".cspml_item_holder",function(){clearTimeout(l)}),f(document).on("ifChanged","form.faceted_search_form input",function(){var s=f(this).attr("data-map-id"),e=f(this).attr("data-show-carousel"),l=f("form#faceted_search_form_"+s).attr("data-ext");"no"==e&&"cspml_list"==l&&"function"==typeof cspml_show_listings_animation&&cspml_show_listings_animation(s),setTimeout(function(){var t=0;f("div.faceted_search_container_"+s+" form.faceted_search_form input").each(function(){1==f(this).prop("checked")&&t++});var i=0==t,a=0==t?"reset":"filter";"no"==e&&"cspml_list"==l?"function"==typeof cspml_filter_listings&&void 0!==window.cspm_global_object.posts_to_retrieve[s]&&cspml_filter_listings(s,window.cspm_global_object.posts_to_retrieve[s],!0,"",i,a):"function"==typeof cspml_hide_listings_animation&&cspml_hide_listings_animation(s)},1e3)}),f(document).on("click","a.cspm_search_in_ext_data, a.cspm_reset_ext_data",function(t){t.preventDefault();var i=f(this).attr("data-map-id"),a=f(this).attr("data-show-carousel"),s=f(this).attr("data-ext"),e="filter";f("div#cspml_listings_container[data-map-id="+i+"]").attr("data-first-load","false"),"no"==a&&"cspml_list"==s&&("function"==typeof cspml_show_listings_animation&&cspml_show_listings_animation(i),"function"==typeof cspml_reset_filter_fields&&cspml_reset_filter_fields(i));var l=f(this).hasClass("cspm_reset_ext_data");l&&(e="reset",f("div#cspml_listings_container[data-map-id="+i+"]").attr("data-first-load","true")),setTimeout(function(){"no"==a&&"cspml_list"==s&&"function"==typeof cspml_filter_listings&&void 0!==window.cspm_global_object.posts_to_retrieve[i]?cspml_filter_listings(i,window.cspm_global_object.posts_to_retrieve[i],!0,"",l,e):"function"==typeof cspml_hide_listings_animation&&cspml_hide_listings_animation(i)},1e3)}),f(document).on("click","span.cspml_close_fs",function(){var t=f(this).attr("data-map-id"),i=f(this).attr("data-filter-width"),i=(f(".cspml_listing_items_container[data-map-id="+t+"]").attr("data-map-cols"),f(".cspml_listing_items_container[data-map-id="+t+"]").attr("data-list-layout"),"cspm-col-lg-"+(12-i)+" cspm-col-md-"+(12-i));f(".cspml_fs_container[data-map-id="+t+"]").is(":visible")?f(".cspml_listing_items_container[data-map-id="+t+"]").removeClass(i).addClass("cspm-col-lg-12 cspm-col-md-12"):f(".cspml_listing_items_container[data-map-id="+t+"]").removeClass("cspm-col-lg-12 cspm-col-md-12").addClass(i),f(".cspml_fs_container[data-map-id="+t+"]").toggle(),cspml_adjust_list_content_height(t)}),f(document).on("click",".cspm_expand_map_btn",function(){var t=f(this).attr("data-map-id"),i=f("div.cspml_resize_map[data-map-id="+t+"]").attr("data-map-height"),a=f("div#codespacing_progress_map_div_"+t),s=f('div.cspml_resize_map[data-map-id="'+t+'"] img'),e=s.attr("src");void 0!==i&&void 0!==e&&a.innerHeight()!=i.replace("px","")&&a.animate({height:i},600,function(){s.attr("src",e.replace("expand.svg","collapse.svg"))})}),f(document).on("click","div.cspml_resize_map",function(){var t=f(this).attr("data-map-id"),i=f(this).attr("data-map-height"),a=f('div.cspml_resize_map[data-map-id="'+t+'"] img'),s=a.attr("src"),e=f("div#codespacing_progress_map_div_"+t);void 0!==i&&void 0!==s&&(e.innerHeight()!=i.replace("px","")?e.animate({height:i},600,function(){a.attr("src",s.replace("expand.svg","collapse.svg"))}):e.animate({height:"100px"},600,function(){a.attr("src",s.replace("collapse.svg","expand.svg")),f("div.search_form_container_"+t).is(":visible")&&(f("div.search_form_container_"+t).removeClass("fadeInUp").addClass("cspm_animated slideOutLeft"),setTimeout(function(){f("div.search_form_container_"+t).css({display:"none"})},200)),f("div.faceted_search_container_"+t).is(":visible")&&(f("div.faceted_search_container_"+t).removeClass("slideInLeft").addClass("cspm_animated slideOutLeft"),setTimeout(function(){f("div.faceted_search_container_"+t).css({display:"none"})},200)),f("div.countries_container_"+t).is(":visible")&&(f("div.countries_container_"+t).removeClass("slideInLeft").addClass("cspm_animated slideOutLeft"),setTimeout(function(){f("div.countries_container_"+t).css({display:"none"})},200),f("li.cspm_country_name[data-map-id="+t+"]").removeClass("selected"))}))}),f("input.cspml_keyword").keypress(function(t){13==t.keyCode&&(t.preventDefault(),t=f(this).closest("div.cspml_fs_options_list").attr("data-map-id"),""==f(this).val()||f("div#cspml_loading_container_"+t).is(":visible")||f("a.cspml_submit_listings_filter[data-map-id="+t+"]").eq(0).trigger("click"))})}(jQuery);