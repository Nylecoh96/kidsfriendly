window.cspm_global_object={};var map_layout={},heatmap={},all_map_markers_objs={};function cspm_validate_latLng(e,t){return!(e<-90||90<e||-1!=e.toString().indexOf(",")||isNaN(Math.floor(e)))&&(!(t<-180||180<t||-1!=t.toString().indexOf(",")||isNaN(Math.floor(t)))&&(""!=e&&""!=t&&new google.maps.LatLng(e,t)))}function cspm_load_map_options(e,t,a,s){var r=void 0!==progress_map_vars.map_script_args[e]?e:"initial",o=(null!=a?a:progress_map_vars.map_script_args[r].center).split(",");cspm_validate_latLng(o[0],o[1])||(i='Edit your map. Click on the menu <strong>"Map settings"</strong> and ...</strong><br />',i+="<strong>1.</strong> Make sure the Laitude & Longitude are comma separated.<br />",i+="<strong>2.</strong> Make sure the Latitude ranges between -90 and 90 degrees.<br />",i+="<strong>3.</strong> Make sure the Longitude ranges between -180 and 180 degrees.<br />",i+="<strong>4.</strong> Make sure the Latitude coordinate is written first, followed by the Longitude.<br />",i+="<strong>5.</strong> Make sure to replace the comma in the Latitude and/or the Longitude by a dot.",cspm_popup_msg(e,"fatal_error","The map center is incorrect!<br /><br />",'Edit your map. Click on the menu <strong>"Map settings"</strong> and ...</strong><br /><strong>1.</strong> Make sure the Laitude & Longitude are comma separated.<br /><strong>2.</strong> Make sure the Latitude ranges between -90 and 90 degrees.<br /><strong>3.</strong> Make sure the Longitude ranges between -180 and 180 degrees.<br /><strong>4.</strong> Make sure the Latitude coordinate is written first, followed by the Longitude.<br /><strong>5.</strong> Make sure to replace the comma in the Latitude and/or the Longitude by a dot.'));var a=null!=s?parseInt(s):parseInt(progress_map_vars.map_script_args[r].zoom),i=parseInt(progress_map_vars.map_script_args[r].max_zoom),e=parseInt(progress_map_vars.map_script_args[r].min_zoom),s="true"==progress_map_vars.map_script_args[r].zoom_on_doubleclick,s={center:[o[0],o[1]],zoom:a,maxZoom:i,minZoom:e,mapTypeControl:"false"!=progress_map_vars.map_script_args[r].mapTypeControl,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.HORIZONTAL_BAR,position:google.maps.ControlPosition.TOP_RIGHT,mapTypeIds:[google.maps.MapTypeId.ROADMAP,google.maps.MapTypeId.SATELLITE,google.maps.MapTypeId.TERRAIN,google.maps.MapTypeId.HYBRID]},streetViewControl:"false"!=progress_map_vars.map_script_args[r].streetViewControl,streetViewControlOptions:{position:google.maps.ControlPosition.RIGHT_TOP},gestureHandling:progress_map_vars.map_script_args[r].gestureHandling,disableDoubleClickZoom:s,backgroundColor:progress_map_vars.map_script_args[r].map_background,clickableIcons:"false"!=progress_map_vars.map_script_args[r].clickableIcons,rotateControl:"false"!=progress_map_vars.map_script_args[r].rotateControl,rotateControlOptions:{position:google.maps.ControlPosition.RIGHT_TOP},scaleControl:"false"!=progress_map_vars.map_script_args[r].scaleControl,fullscreenControl:"false"!=progress_map_vars.map_script_args[r].fullscreenControl,controlSize:progress_map_vars.map_script_args[r].controlSize};return r="true"==progress_map_vars.map_script_args[r].zoomControl&&"default"==progress_map_vars.map_script_args[r].zoomControlType?{zoomControl:!0,zoomControlOptions:{}}:{zoomControl:!1},jQuery.extend({},s,r)}function cspm_initial_map_style(e,t){var a;return"custom_style"==e&&0==t?a={mapTypeId:google.maps.MapTypeId.ROADMAP}:"custom_style"==e?a={mapTypeId:"custom_style"}:"ROADMAP"==e?a={mapTypeId:google.maps.MapTypeId.ROADMAP}:"SATELLITE"==e?a={mapTypeId:google.maps.MapTypeId.SATELLITE}:"TERRAIN"==e?a={mapTypeId:google.maps.MapTypeId.TERRAIN}:"HYBRID"==e&&(a={mapTypeId:google.maps.MapTypeId.HYBRID}),a}var post_ids_and_categories={},post_lat_lng_coords={},post_ids_and_child_status={};function cspm_new_pin_object(e,t){var a=t.post_id,s=t.post_categories,r=t.coordinates.lat,o=t.coordinates.lng,i=t.icon.url,p=t.icon.size,n=t.is_child,_=t.media;t.coordinates.address;if(!cspm_validate_latLng(r,o))return!1;var c=void 0!==progress_map_vars.map_script_args[e]?e:"initial";post_lat_lng_coords[e][a]=r+"_"+o,post_lat_lng_coords[e]["post_id_"+a]={},post_ids_and_child_status[e][r+"_"+o]=n;var m=""!=s?s.split(","):"";post_lat_lng_coords[e]["post_id_"+a][0]=m;s="";"customize"==progress_map_vars.map_script_args[c].defaultMarker&&(m=i,d="true"!=progress_map_vars.map_script_args[c].retinaSupport||cspm_is_svg(m)?parseInt(p.split("x")[0]):parseInt(p.split("x")[0])/2,i=(g="true"!=progress_map_vars.map_script_args[c].retinaSupport||cspm_is_svg(m)?parseInt(p.split("x")[1]):parseInt(p.split("x")[1])/2)/2,p=d/2,l=null,"auto"==progress_map_vars.map_script_args[c].marker_anchor_point_option?l=new google.maps.Point(p,i):"manual"==progress_map_vars.map_script_args[c].marker_anchor_point_option&&(l="true"!=progress_map_vars.map_script_args[c].retinaSupport||cspm_is_svg(m)?new google.maps.Point(progress_map_vars.map_script_args[c].marker_anchor_point.split(",")[0],progress_map_vars.map_script_args[c].marker_anchor_point.split(",")[1]):new google.maps.Point(progress_map_vars.map_script_args[c].marker_anchor_point.split(",")[0]/2,progress_map_vars.map_script_args[c].marker_anchor_point.split(",")[1]/2)),s={url:m},0<d&&0<g&&(s=jQuery.extend({},s,{anchor:l,scaledSize:new google.maps.Size(d,g),size:new google.maps.Size(d,g)})));var l=void 0!==progress_map_vars["titles_"+e]&&void 0!==progress_map_vars["titles_"+e][a]?progress_map_vars["titles_"+e][a]:"",d=cspm_marker_label_obj(e,a),g={};0<cspm_object_size(d)&&(g={label:d},void 0===d.top||isNaN(d.top)||void 0===d.left||isNaN(d.left)||(s=jQuery.extend({},s,{labelOrigin:new google.maps.Point(d.top,d.left)})));t={optimized:!1,icon:s,id:a,post_id:a,is_child:n,media:_,title:l,map_id:e};return{latLng:[r,o],tag:["post_id__"+a,"to_cluster"],id:a+"_"+n,options:t=jQuery.extend({},t,g)}}function cspm_marker_label_obj(e,t){var a=void 0!==progress_map_vars.map_script_args[e]?e:"initial";return"yes"==progress_map_vars.map_script_args[a].marker_labels&&void 0!==progress_map_vars["marker_labels_"+e]&&void 0!==progress_map_vars["marker_labels_"+e][t]&&void 0!==progress_map_vars["marker_labels_"+e][t].hide&&"no"==progress_map_vars["marker_labels_"+e][t].hide.toString()&&""!=progress_map_vars["marker_labels_"+e][t].text.toString()?{text:progress_map_vars["marker_labels_"+e][t].text.toString(),color:progress_map_vars["marker_labels_"+e][t].color.toString(),fontFamily:progress_map_vars["marker_labels_"+e][t].fontFamily.toString(),fontSize:progress_map_vars["marker_labels_"+e][t].fontSize.toString(),fontWeight:progress_map_vars["marker_labels_"+e][t].fontWeight.toString(),top:parseInt(progress_map_vars["marker_labels_"+e][t].top),left:parseInt(progress_map_vars["marker_labels_"+e][t].left)}:{}}function cspm_is_svg(e){return"svg"==e.substr(e.lastIndexOf(".")+1)}function cspm_set_marker_labels_visibility(i,p){var n=jQuery.Deferred(),e=void 0!==progress_map_vars.map_script_args[p]?p:"initial";if("no"!=progress_map_vars.map_script_args[e].marker_labels)return i.gmap3({get:{name:"marker",tag:"to_cluster",all:!0,callback:function(e){for(var t=0;t<e.length;t++){var a,s,r=e[t],o=parseInt(r.post_id);""==o||"user_location"==o||isNaN(o)||(a=(s=r.position).lat(),s=s.lng(),cspm_map_bounds_contains_marker(i,a,s)&&null!=r.getMap()&&1==r.visible?null!=r.getLabel()||0<cspm_object_size(o=cspm_marker_label_obj(p,o))&&r.setLabel(o):r.setLabel(null))}n.resolve()}}}),n}function cspm_clustering(d,g,u){var t,v=void 0!==progress_map_vars.map_script_args[g]?g:"initial",f=d.gmap3("get");small_cluster_size=progress_map_vars.map_script_args[v].small_cluster_size,medium_cluster_size=progress_map_vars.map_script_args[v].medium_cluster_size,big_cluster_size=progress_map_vars.map_script_args[v].big_cluster_size;var h=parseInt(progress_map_vars.map_script_args[v].max_zoom);return d.gmap3({get:{name:"marker",tag:"to_cluster",all:!0,callback:function(e){var l,a;e&&"undefined"!=typeof MarkerClusterer&&(t=new MarkerClusterer(f,e,{gridSize:parseInt(progress_map_vars.map_script_args[v].grid_size),styles:[{url:progress_map_vars.map_script_args[v].small_cluster_icon,height:parseInt(small_cluster_size.split("x")[0]),width:parseInt(small_cluster_size.split("x")[1]),textColor:progress_map_vars.map_script_args[v].cluster_text_color,textSize:15,fontWeight:"bold",fontFamily:"monospace"},{url:progress_map_vars.map_script_args[v].medium_cluster_icon,height:parseInt(medium_cluster_size.split("x")[0]),width:parseInt(medium_cluster_size.split("x")[1]),textColor:progress_map_vars.map_script_args[v].cluster_text_color,textSize:17,fontWeight:"bold",fontFamily:"monospace"},{url:progress_map_vars.map_script_args[v].big_cluster_icon,height:parseInt(big_cluster_size.split("x")[0]),width:parseInt(big_cluster_size.split("x")[1]),textColor:progress_map_vars.map_script_args[v].cluster_text_color,textSize:19,fontWeight:"bold",fontFamily:"monospace"}],zoomOnClick:!0,maxZoom:h,minimumClusterSize:2,averageCenter:!0,ignoreHidden:!0,title:progress_map_vars.cluster_text,enableRetinaIcons:"true"==progress_map_vars.map_script_args[v].retinaSupport}),a=void 0!==progress_map_vars.map_script_args.initial.main_hex_color?progress_map_vars.map_script_args.initial.main_hex_color:"#189AC9",google.maps.event.addListener(t,"mouseover",function(e){var t=google.maps.geometry.spherical.computeDistanceBetween(e.getCenter(),e.getBounds().getNorthEast());d.gmap3({circle:{options:{center:e.getCenter(),radius:t,strokeColor:a,strokeOpacity:.5,strokeWeight:3,fillColor:a,fillOpacity:.3},tag:"cluster_area"}})}),google.maps.event.addListener(t,"mouseout",function(e){d.gmap3({clear:{tag:"cluster_area"}})}),google.maps.event.addListener(t,"click",function(_){d.gmap3({clear:{tag:"cluster_area"}});var c,m=f.getZoom();(h<=m||"TERRAIN"==progress_map_vars.map_script_args[v].initial_map_style&&15<=m)&&(c=void 0!==_.markers_?_.markers_:_.getMarkers(),google.maps.event.addListenerOnce(f,"idle",function(){m=f.getZoom();var e=Math.pow(2,m),t=new google.maps.LatLng(f.getBounds().getNorthEast().lat(),f.getBounds().getSouthWest().lng()),a=f.getProjection().fromLatLngToPoint(t),t=f.getProjection().fromLatLngToPoint(_.center_),s=new google.maps.Point(Math.floor((t.x-a.x)*e),Math.floor((t.y-a.y)*e)),r=d.position(),o=0,i=[];if(void 0!==c){for(var p=0;p<c.length;p++)1==c[p].visible&&(o++,i.push(c[p].id));var n=i.join().replace(",","");setTimeout(function(){jQuery("div.cluster_posts_widget_"+g).attr("data-cluster-id")!=n&&(jQuery("div.cluster_posts_widget_"+g).html('<div class="cspm_infobox_spinner cspm_border_top_after_hex"></div></div>'),0<o?(jQuery("div.cluster_posts_widget_"+g).removeClass("flipOutX"),jQuery("div.cluster_posts_widget_"+g).addClass("cspm_animated flipInX").css("display","block"),jQuery("div.cluster_posts_widget_"+g).css({left:s.x/2-r.left-70+"px",top:s.y/2+r.top-40+"px"}),jQuery("div.cluster_posts_widget_"+g).attr("data-cluster-id",n),l&&4!=l.readystate&&l.abort(),l=jQuery.post(progress_map_vars.ajax_url,{action:"cspm_load_clustred_markers_list",post_ids:i,map_object_id:progress_map_vars.map_script_args[v].map_object_id,map_settings:progress_map_vars.map_script_args[v].map_settings,light_map:u},function(e){jQuery("div.cluster_posts_widget_"+g).html(e),"function"==typeof jQuery("div.cluster_posts_widget_"+g).mCustomScrollbar&&jQuery("div.cluster_posts_widget_"+g).mCustomScrollbar({autoHideScrollbar:!1,mouseWheel:{enable:!0,preventDefault:!0},theme:"dark-2"}),jQuery(document).on("click","div.cluster_posts_widget_"+g+" ul li",function(){var e,t=jQuery(this).attr("data-post-id");u||(e=jQuery("li.cspm_carousel_item[data-map-id="+g+"][data-post-id="+t+"]").attr("jcarouselindex"),cspm_call_carousel_item(jQuery("ul#cspm_carousel_"+g).data("jcarousel"),e),cspm_carousel_item_hover_style("li.jcarousel-item-"+e+".cspm_carousel_item[data-map-id="+g+"][data-post-id="+t+"]",g))})})):jQuery("div.cluster_posts_widget_"+g).css({display:"none"}))},1e3)}setTimeout(function(){m=f.getZoom(),"TERRAIN"!=progress_map_vars.map_script_args[v].initial_map_style&&h<m&&f.setZoom(h)},100)}))}))}}}),t}function cspm_zoom_in_and_out(e){e=e.gmap3("get");e.setZoom(e.getZoom()-1),e.setZoom(e.getZoom()+1)}function cspm_simple_clustering(e,t){var a=e.gmap3("get");"undefined"!=typeof MarkerClusterer&&new MarkerClusterer(a),cspm_zoom_in_and_out(e)}function cspm_animate_marker(o,i,p){var n=void 0!==progress_map_vars.map_script_args[i]?i:"initial";o.gmap3({get:{name:"marker",tag:"post_id__"+p,callback:function(e){var t,a,s,r;void 0!==e&&1==e.visible&&(e.is_child,t="div.cspm_infobox_container[data-post-id="+p+"][data-map-id="+i+"]","pulsating_circle"==progress_map_vars.map_script_args[n].markerAnimation?(a=o.gmap3("get"),r=Math.pow(2,a.getZoom()),s=new google.maps.LatLng(a.getBounds().getNorthEast().lat(),a.getBounds().getSouthWest().lng()),s=a.getProjection().fromLatLngToPoint(s),a=a.getProjection().fromLatLngToPoint(e.position),s=new google.maps.Point(Math.floor((a.x-s.x)*r),Math.floor((a.y-s.y)*r)),r=o.position(),jQuery("div#pulsating_holder."+i+"_pulsating").css({display:"block",left:s.x+r.left-15+"px",top:s.y+r.top-18+"px"}),setTimeout(function(){jQuery("div#pulsating_holder."+i+"_pulsating").css("display","none")},1500)):"bouncing_marker"==progress_map_vars.map_script_args[n].markerAnimation?(e.setAnimation(google.maps.Animation.BOUNCE),setTimeout(function(){e.setAnimation(null)},1500)):"flushing_infobox"==progress_map_vars.map_script_args[n].markerAnimation&&(jQuery("div.cspm_infobox_container[data-map-id="+i+"]").removeClass("cspm_animated flash"),setTimeout(function(){jQuery(t).addClass("cspm_animated flash"),jQuery(t).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){jQuery(t).removeClass("flash")})},600)))}}})}function cspm_zoom_in(e,t,a){var s=void 0!==progress_map_vars.map_script_args[e]?e:"initial";t.on("click",function(){var e=a.gmap3("get"),t=e.getZoom();t<progress_map_vars.map_script_args[s].max_zoom&&e.setZoom(t+1),jQuery("div[class^=cluster_posts_widget]").removeClass("flipInX"),jQuery("div[class^=cluster_posts_widget]").addClass("cspm_animated flipOutX")})}function cspm_zoom_out(e,t,a){var s=void 0!==progress_map_vars.map_script_args[e]?e:"initial";t.on("click",function(){var e=a.gmap3("get"),t=e.getZoom();t>progress_map_vars.map_script_args[s].min_zoom&&e.setZoom(t-1),jQuery("div[class^=cluster_posts_widget]").removeClass("flipInX"),jQuery("div[class^=cluster_posts_widget]").addClass("cspm_animated flipOutX")})}function cspm_init_carousel(e,t){var a=void 0!==progress_map_vars.map_script_args[t]?t:"initial",s=t;if("true"!=progress_map_vars.map_script_args[a].show_carousel||"fullscreen-map"==map_layout[t]||"fit-in-map"==map_layout[t])return!1;var r=!1,o="listview"==progress_map_vars.map_script_args[a].items_view?progress_map_vars.map_script_args[a].horizontal_item_width:progress_map_vars.map_script_args[a].vertical_item_width;"mr-cl"!=map_layout[t]&&"ml-cr"!=map_layout[t]&&"map-tglc-right"!=map_layout[t]&&"map-tglc-left"!=map_layout[t]||(r=!0,o="listview"==progress_map_vars.map_script_args[a].items_view?progress_map_vars.map_script_args[a].horizontal_item_height:progress_map_vars.map_script_args[a].vertical_item_height);var i={},t={};""!=progress_map_vars.map_script_args[a].number_of_items?i={size:parseInt(progress_map_vars.map_script_args[a].number_of_items)}:null!=e&&(i={size:parseInt(e)});r={scroll:parseInt(progress_map_vars.map_script_args[a].carousel_scroll),wrap:progress_map_vars.map_script_args[a].carousel_wrap,auto:parseInt(progress_map_vars.map_script_args[a].carousel_auto),initCallback:cspm_carousel_init_callback,itemFallbackDimension:parseInt(o),itemLoadCallback:cspm_carousel_itemLoadCallback,rtl:"false"!=progress_map_vars.map_script_args[a].carousel_mode,animation:progress_map_vars.map_script_args[a].carousel_animation,easing:progress_map_vars.map_script_args[a].carousel_easing,vertical:r};t=0<parseInt(progress_map_vars.map_script_args[a].carousel_auto)?{itemFirstInCallback:{onAfterAnimation:cspm_carousel_item_request}}:{itemFirstInCallback:cspm_carousel_itemFirstInCallback};t=jQuery.extend({},r,i,t);jQuery("ul#cspm_carousel_"+s).jcarousel(t)}function cspm_carousel_itemFirstInCallback(e,t,a,s){e=jQuery(e.container).find("ul").attr("data-map-id");return"prev"!=s&&"next"!=s||cspm_carousel_item_hover_style("li.cspm_carousel_item[data-map-id="+e+"][data-index="+t.value+"]",e),!1}function cspm_carousel_itemLoadCallback(e){for(var t=jQuery(e.container).find("ul").attr("data-map-id"),a=void 0!==progress_map_vars.map_script_args[t]?t:"initial",s=parseInt(e.first);s<=parseInt(e.last);s++){var r,o=jQuery("li.jcarousel-item-"+s+"[data-map-id="+t+"]").attr("data-post-id");jQuery("li.cspm_carousel_item[data-map-id="+t+"][data-post-id="+o+"]").has("div.cspm_spinner").length&&(r=progress_map_vars["carousel_items_"+a][o.split("-")[0]],jQuery("li.cspm_carousel_item[data-map-id="+t+"][data-post-id="+o+"]").addClass("cspm_animated fadeIn").html(r))}}function cspm_carousel_init_callback(o){var e=jQuery(o.container).find("ul").attr("data-map-id"),i=e,t=void 0!==progress_map_vars.map_script_args[i]?i:"initial",p="yes"==progress_map_vars.map_script_args[t].connect_carousel_with_map;"true"==progress_map_vars.map_script_args[t].scrollwheel_carousel&&jQuery("ul#cspm_carousel_"+e).mousewheel(function(e){return 0<e.deltaY?(o.prev(),setTimeout(function(){cspm_carousel_item_request(o,0,p)},600),!1):e.deltaY<0?(o.next(),setTimeout(function(){cspm_carousel_item_request(o,0,p)},600),!1):void 0}),"true"==progress_map_vars.map_script_args[t].touchswipe_carousel&&"function"==typeof jQuery("ul#cspm_carousel_"+e).swipe&&jQuery("ul#cspm_carousel_"+e).swipe({swipe:function(e,t,a,s,r){return"mu-cd"==map_layout[i]||"md-cu"==map_layout[i]||"m-con"==map_layout[i]||"fullscreen-map-top-carousel"==map_layout[i]||"fit-in-map-top-carousel"==map_layout[i]?"left"==t?(o.next(),setTimeout(function(){cspm_carousel_item_request(o,0,p)},600),!1):"right"==t?(o.prev(),setTimeout(function(){cspm_carousel_item_request(o,0,p)},600),!1):void 0:"ml-cr"==map_layout[i]||"mr-cl"==map_layout[i]?"up"==t?(o.next(),setTimeout(function(){cspm_carousel_item_request(o,0,p)},600),!1):"down"==t?(o.prev(),setTimeout(function(){cspm_carousel_item_request(o,0,p)},600),!1):void 0:void 0},threshold:0}),o.clip.hover(function(){o.stopAuto()},function(){o.startAuto()}),o.buttonNext.bind("click",function(){setTimeout(function(){cspm_carousel_item_request(o,0,p)},600)}),o.buttonPrev.bind("click",function(){setTimeout(function(){cspm_carousel_item_request(o,0,p)},600)})}function cspm_carousel_item_request(e,t,a){var s=jQuery(e.container).find("ul").attr("data-map-id"),r=void 0!==progress_map_vars.map_script_args[s]?s:"initial",o=jQuery("div#codespacing_progress_map_div_"+s),e=parseInt(e.first),t=0<parseInt(progress_map_vars.map_script_args[r].carousel_auto)?0:parseInt(t);0!=t&&t!=e&&(e=t);var i=jQuery(".jcarousel-item-"+e).attr("data-post-id");i&&(cspm_carousel_item_hover_style("li.cspm_carousel_item[data-map-id="+s+"][data-post-id="+i+"]",s),1!=a||(e=jQuery("li.cspm_carousel_item[data-map-id="+s+"][data-post-id="+i+"]").attr("data-latlng"))&&void 0!==e&&(e=(a=e.split("_"))[0].replace(/\"/g,""),a=a[1].replace(/\"/g,""),cspm_center_map_at_point(o,s,e,a,"zoom")),setTimeout(function(){cspm_animate_marker(o,s,i)},200))}function cspm_call_carousel_item(e,t){return void 0!==e&&e.scroll(jQuery.jcarousel.intval(t)),!1}function cspm_carousel_item_hover_style(e,t){var a=void 0!==progress_map_vars.map_script_args[t]?t:"initial";jQuery("li.cspm_carousel_item[data-map-id="+t+"]").removeClass("cspm_carousel_first_item").css({"background-color":progress_map_vars.map_script_args[a].items_background}),jQuery(e).addClass("cspm_carousel_first_item").css({"background-color":progress_map_vars.map_script_args[a].items_hover_background})}function cspm_carousel_item_HTML(e){var t="";if("object"!=typeof e)return t;var a=e.map_id,s=e.post_id,r=e.is_child,o=e.index,i=e.latLng,e=void 0!==progress_map_vars.map_script_args[a]?a:"initial";return"listview"==progress_map_vars.map_script_args[e].items_view?(item_width=parseInt(progress_map_vars.map_script_args[e].horizontal_item_width),item_height=parseInt(progress_map_vars.map_script_args[e].horizontal_item_height),item_css=progress_map_vars.map_script_args[e].horizontal_item_css,items_background=progress_map_vars.map_script_args[e].items_background):"gridview"==progress_map_vars.map_script_args[e].items_view&&(item_width=parseInt(progress_map_vars.map_script_args[e].vertical_item_width),item_height=parseInt(progress_map_vars.map_script_args[e].vertical_item_height),item_css=progress_map_vars.map_script_args[e].vertical_item_css,items_background=progress_map_vars.map_script_args[e].items_background),t='<li class="cspm_carousel_item cspm_border_radius cspm_border_shadow" value="'+o+'" data-map-id="'+a+'" data-post-id="'+s+'" data-is-child="'+r+'" data-index="'+o+'" data-latlng="'+i+'" style="width:'+item_width+"px; height:"+item_height+"px; background-color:"+items_background+"; "+item_css+'">',t+='<div class="cspm_spinner cspm_border_top_before_hex"></div>',t+="</li>"}function cspm_rewrite_carousel(e,t,a){var s=void 0!==progress_map_vars.map_script_args[e]?e:"initial";if("yes"!=t||"true"!=progress_map_vars.map_script_args[s].show_carousel||"fullscreen-map"==map_layout[e]||"fit-in-map"==map_layout[e])return a.length;var r=jQuery("ul#cspm_carousel_"+e).data("jcarousel");if(void 0!==r){r.reset();for(var o=cspm_object_size(a),i=0,p=0;p<o;p++){var n=a[p],_=p+1,n=cspm_carousel_item_HTML({map_id:e,post_id:n,is_child:post_ids_and_child_status[e][post_lat_lng_coords[e][n]],index:_,latLng:post_lat_lng_coords[e][n]});r.add(_,n),i++}return cspm_init_carousel(o,e),i++}}function cspm_fullscreen_map(e){var t=window.innerWidth,a=window.innerHeight;jQuery("div.codespacing_progress_map_area[data-map-id="+e+"]").css({height:a,width:t})}function cspm_carousel_width(e){var t=jQuery("div#codespacing_progress_map_div_"+e).width(),t=parseInt(t-40),a=parseInt(-0-t/2);jQuery("div.cspm_carousel_on_top[data-map-id="+e+"]").css({width:t,"margin-left":a+"px"})}function cspm_fitIn_map(e){var t=void 0!==progress_map_vars.map_script_args[e]?e:"initial",a=jQuery("div.codespacing_progress_map_area[data-map-id="+e+"]").parent().height();0==a&&(a=progress_map_vars.map_script_args[t].layout_fixed_height),jQuery("div.codespacing_progress_map_area[data-map-id="+e+"]").css({height:a})}function cspm_compute_distance_between(e,t,a,s){t=new google.maps.LatLng(e,t),s=new google.maps.LatLng(a,s);return google.maps.geometry.spherical.computeDistanceBetween(t,s)}function cspm_geolocate(s,r,o,e,t,i,p,n){var _=void 0!==progress_map_vars.map_script_args[r]?r:"initial",a=(s.gmap3("get").getZoom(),"true"!=progress_map_vars.map_script_args[_].retinaSupport||cspm_is_svg(e)?parseInt(t.split("x")[0]):parseInt(t.split("x")[0])/2),c="true"!=progress_map_vars.map_script_args[_].retinaSupport||cspm_is_svg(e)?parseInt(t.split("x")[1]):parseInt(t.split("x")[1])/2,m=c/2,l=a/2,t=null,t=new google.maps.Point(l,m);marker_icon={url:e},0<a&&0<c&&(marker_icon=jQuery.extend({},marker_icon,{anchor:t,scaledSize:new google.maps.Size(a,c)})),s.gmap3({getgeoloc:{callback:function(t){var e,a;t?s.gmap3({map:{options:{center:t,zoom:parseInt(p)},onces:{tilesloaded:function(e){o&&setTimeout(function(){s.gmap3({marker:{latLng:t,tag:["cspm_user_marker_"+r,"to_cluster"],options:{icon:marker_icon,post_id:"user_location",id:"user_location"},events:{click:function(e,t,a){"true"==progress_map_vars.map_script_args[_].nearby_places_option&&(jQuery("select.cspm_proximities_list[data-map-id="+r+"] option.cspm_proximity_name[data-map-id="+r+"]").attr("data-marker-latlng",e.position).attr("data-marker-post-id","user_location"),jQuery("li.cspm_proximity_name[data-map-id="+r+"]").attr("data-marker-latlng",e.position).attr("data-marker-post-id","user_location").removeClass("selected"),cspm_popup_msg(r,"success","",progress_map_vars.new_marker_selected_msg))}}},circle:{options:{center:t,radius:parseInt(1e3*i),fillColor:progress_map_vars.map_script_args[_].user_circle_fillColor,fillOpacity:progress_map_vars.map_script_args[_].user_circle_fillOpacity,strokeColor:progress_map_vars.map_script_args[_].user_circle_strokeColor,strokeOpacity:progress_map_vars.map_script_args[_].user_circle_strokeOpacity,strokeWeight:parseInt(progress_map_vars.map_script_args[_].user_circle_strokeWeight),editable:!1}}})},500)}}}}):n&&(e=progress_map_vars.geoErrorTitle,a=progress_map_vars.geoErrorMsg,cspm_popup_msg(r,"error",e,"<br />"+a)||alert(e+"\n\n"+a),console.log("PROGRESS MAP: "+progress_map_vars.geoDeprecateMsg))}}})}function cspm_get_user_marker(e,t){e.gmap3({get:{name:"marker",tag:"cspm_user_marker_"+t,callback:function(e){if(e)return e}}})}function cspm_is_panorama_active(e){e=e.gmap3("get");return"function"==typeof e.getStreetView&&e.getStreetView().getVisible()}function cspm_center_map_at_point(e,t,a,s,r){var o,t=void 0!==progress_map_vars.map_script_args[t]?t:"initial",i=e.gmap3("get");void 0!==i&&(e="function"==typeof i.getZoom?i.getZoom():12,o=new google.maps.LatLng(a,s),t=void 0!==progress_map_vars.map_script_args[t].carousel_map_zoom?progress_map_vars.map_script_args[t].carousel_map_zoom:e,"zoom"==r&&e!=parseInt(t)?i.setZoom(parseInt(t)):"resize"==r&&google.maps.event.trigger(i,"resize"),setTimeout(function(){"function"==typeof i.panTo&&i.panTo(o)},200))}function cspm_map_bounds_contains_marker(e,t,a){e=e.gmap3("get");if(void 0===e)return!1;a=new google.maps.LatLng(t,a);return"function"==typeof e.getBounds&&e.getBounds().contains(a)}function cspm_polygon_contains_marker(e,t,a){a=new google.maps.LatLng(t,a);return google.maps.geometry.poly.containsLocation(a,e)}var cspm_infoboxes={};function cspm_infobox(e,t,a,s){progress_map_vars.map_script_args[t];var r=parseInt(a.post_id),o=void 0===a.icon||void 0===a.icon.size||void 0===a.icon.size.height?38:a.icon.size.height,i=s.type,p=s.display_event,n=(s.link_target,s.remove_on_mouseout),_=s.show_close_btn,s="light_map"==s.map_type?!0:"onload"!=p&&"onzoom"!=p;return new SnazzyInfoWindow({map:e.gmap3("get"),marker:a,content:progress_map_vars["infoboxes_"+t][r],wrapperClass:"cspm_marker_infobox cspm_marker_overlay",panOnOpen:s,closeOnMapClick:"onload"!=p&&"onzoom"!=p,openOnMarkerMouseOver:"onhover"==p,closeOnMarkerMouseOut:"onload"!=p&&"onzoom"!=p&&"true"==n,openOnMarkerClick:"onclick"==p,closeWhenOthersOpen:"onload"!=p&&"onzoom"!=p,showCloseButton:"true"==_,pointer:"10px",borderRadius:"rounded_bubble"==i?"50%":"2px",backgroundColor:"transparent",padding:"0px",border:!1,offset:{top:"-"+(o+2)+"px"},shadow:{h:"0px",v:"1px",blur:"4px",spread:"-1px",opacity:.2,color:"#000"},callbacks:{open:function(){jQuery("a.cspm_popup_single_post").on("click",function(e){e.preventDefault();e=jQuery(this).attr("href");void 0!==e&&""!=e&&cspm_open_single_post_modal(e)}),jQuery("a.cspm_popup_nearby_palces_map").on("click",function(e){e.preventDefault();var t=progress_map_vars.nearby_places_page_url,e=jQuery(this).attr("data-post-id");void 0!==t&&""!=t&&void 0!==e&&""!=e&&cspm_open_single_post_modal(t+"?post_id="+e)})},afterOpen:function(){jQuery("body").remove("#cspm_single_post_modal"),setTimeout(function(){0==jQuery("#cspm_single_post_modal").length&&jQuery("body").append('<div id="cspm_single_post_modal"></div>')},100)},beforeClose:function(){if(void 0!==cspm_marker_menus_status[t]&&"opened"==cspm_marker_menus_status[t])return!1}}})}function cspm_draw_multiple_infoboxes(p,n,_){var c=jQuery.Deferred(),m=(progress_map_vars.map_script_args[n],_.display_event);return p.gmap3({get:{name:"marker",tag:"to_cluster",all:!0,callback:function(e){for(var t=0;t<e.length;t++){var a,s,r=e[t].id,o=e[t],i=parseInt(e[t].post_id);""==i||"user_location"==i||isNaN(i)||(a=(s=e[t].position).lat(),i=s.lng(),s=!1,"onzoom"==m&&void 0!==_.display_zoom_level&&p.gmap3("get").getZoom()>=_.display_zoom_level&&(s=!0),cspm_map_bounds_contains_marker(p,a,i)&&null!=e[t].getMap()&&1==e[t].visible&&("onload"==m||"onzoom"==m&&s)?void 0===cspm_infoboxes[n][r]?(cspm_infoboxes[n][r]=cspm_infobox(p,n,o,_),cspm_infoboxes[n][r].open()):cspm_infoboxes[n][r].isOpen()||cspm_infoboxes[n][r].open():"object"==typeof cspm_infoboxes[n][r]&&cspm_infoboxes[n][r].isOpen()&&cspm_infoboxes[n][r].close())}c.resolve()}}}),c}function cspm_draw_single_infobox(e,t,a,s){var r=jQuery.Deferred(),o=a.id;parseInt(a.post_id);return void 0===cspm_infoboxes[t][o]&&(cspm_infoboxes[t][o]=cspm_infobox(e,t,a,s),cspm_infoboxes[t][o].open(),r.resolve()),r}function cspm_connect_carousel_and_infobox(){setTimeout(function(){jQuery("div.cspm_infobox_container[data-move-carousel=true] div.cspm_infobox_content_container").on("mouseenter",function(){var e=jQuery(this).attr("data-map-id"),t=jQuery(this).attr("data-post-id"),a=jQuery(this).attr("data-show-carousel"),t=jQuery("li.cspm_carousel_item[data-map-id="+e+"][data-post-id="+t+"]").attr("jcarouselindex");"true"==a&&cspm_call_carousel_item(jQuery("ul#cspm_carousel_"+e).data("jcarousel"),t)})},1e3)}var cspm_marker_popups={};function cspm_popup(e,t,a,s){progress_map_vars.map_script_args[t];var r=parseInt(a.post_id),o=void 0===a.icon||void 0===a.icon.size||void 0===a.icon.size.height?38:a.icon.size.height,i=(void 0===a.icon||void 0===a.icon.size||void 0===a.icon.size.width||a.icon.size.width,s.placement.toString()),p="left"==i||"right"==i?"7px":"5px",n="0px";"left"==i||"right"==i?n="-"+o/2+"px":"top"==i&&(n="-"+(o-7)+"px");r='<div class="cspm_marker_popup_content" style="font-weight:'+s.fontWeight+'">'+progress_map_vars["marker_popups_"+t][r]+"</div>";return new SnazzyInfoWindow({map:e.gmap3("get"),marker:a,content:r,wrapperClass:"cspm_marker_popup cspm_marker_overlay",panOnOpen:!1,closeOnMapClick:!1,openOnMarkerMouseOver:!0,closeOnMarkerMouseOut:!1,openOnMarkerClick:!0,closeWhenOthersOpen:!1,showCloseButton:!1,pointer:p,borderRadius:"2px",backgroundColor:s.bgColor,fontColor:s.color,fontSize:s.fontSize,padding:"5px 7px",border:!1,placement:i,offset:{top:n},shadow:{h:"3px",v:"3px",blur:"0px",spread:"-1px",opacity:.15,color:"#000"}})}function cspm_draw_multiple_popups(i,p,n){var _=jQuery.Deferred();progress_map_vars.map_script_args[p];return i.gmap3({get:{name:"marker",tag:"to_cluster",all:!0,callback:function(e){for(var t=0;t<e.length;t++){var a,s=e[t].id,r=e[t],o=parseInt(e[t].post_id);""==o||"user_location"==o||isNaN(o)||""==progress_map_vars["marker_popups_"+p][o]||(o=(a=e[t].position).lat(),a=a.lng(),cspm_map_bounds_contains_marker(i,o,a)&&null!=e[t].getMap()&&1==e[t].visible?void 0===cspm_marker_popups[p][s]?(cspm_marker_popups[p][s]=cspm_popup(i,p,r,n),cspm_marker_popups[p][s].open()):cspm_marker_popups[p][s].isOpen()||cspm_marker_popups[p][s].open():"object"==typeof cspm_marker_popups[p][s]&&cspm_marker_popups[p][s].isOpen()&&cspm_marker_popups[p][s].close())}_.resolve()}}}),_}var cspm_marker_menus={},cspm_marker_menus_status={};function cspm_marker_menu(e,s,r,o){progress_map_vars.map_script_args[s];var t=parseInt(r.post_id),a=void 0===r.icon||void 0===r.icon.size||void 0===r.icon.size.height?38:r.icon.size.height,i=(void 0===r.icon||void 0===r.icon.size||void 0===r.icon.size.width||r.icon.size.width,o.placement.toString()),p="left"==i||"right"==i?"7px":"5px",n="0px";"left"==i||"right"==i?n="-"+a/2+"px":"top"==i&&(n="-"+(a-7)+"px");a='<div class="cspm_marker_menu_content" style="font-weight:'+o.fontWeight+'">'+progress_map_vars["marker_menus_"+s][t]+"</div>";return cspm_marker_menus[s]=new SnazzyInfoWindow({map:e.gmap3("get"),marker:r,post_id:t,content:a,wrapperClass:"cspm_marker_menu cspm_marker_overlay",panOnOpen:!0,edgeOffset:{top:50,right:50,bottom:50,left:50},closeOnMapClick:"yes"==o.close_map_click,openOnMarkerMouseOver:"yes"==o.mouse_enter,closeOnMarkerMouseOut:"yes"==o.mouse_out,openOnMarkerClick:!1,closeWhenOthersOpen:!0,showCloseButton:"yes"==o.close_btn,pointer:p,borderRadius:"2px",backgroundColor:o.bgColor,fontColor:o.color,fontSize:o.fontSize,padding:"10px 17px",border:!1,placement:i,offset:{top:n},shadow:{h:"3px",v:"3px",blur:"0px",spread:"-1px",opacity:.15,color:"#000"},callbacks:{open:function(){jQuery("a.cspm_popup_single_post").on("click",function(e){e.preventDefault();e=jQuery(this).attr("href");void 0!==e&&""!=e&&cspm_open_single_post_modal(e)}),jQuery("a.cspm_popup_nearby_palces_map").on("click",function(e){e.preventDefault();var t=progress_map_vars.nearby_places_page_url,e=jQuery(this).attr("data-post-id");void 0!==t&&""!=t&&void 0!==e&&""!=e&&cspm_open_single_post_modal(t+"?post_id="+e)})},afterOpen:function(){var t,a;cspm_marker_menus_status[s]="opened",setTimeout(function(){cspm_marker_menus_status[s]=""},100),jQuery("body").remove("#cspm_single_post_modal"),setTimeout(function(){0==jQuery("#cspm_single_post_modal").length&&jQuery("body").append('<div id="cspm_single_post_modal"></div>')},100),"true"==o.proximities&&(t=r.position,a=r.post_id,jQuery("a.cspm_prepare_for_proximity").click(function(e){e.preventDefault(),jQuery("select.cspm_proximities_list[data-map-id="+s+"] option.cspm_proximity_name[data-map-id="+s+"]").attr("data-marker-latlng",t).attr("data-marker-post-id",a),jQuery("li.cspm_proximity_name[data-map-id="+s+"]").attr("data-marker-latlng",t).attr("data-marker-post-id",a).removeClass("selected"),cspm_popup_msg(s,"success","",o.proximities_msg),jQuery("div.cspm_proximities_container_"+s).is(":hidden")&&jQuery("div.cspm_proximities_btn[data-map-id="+s+"]").trigger("click"),"object"==typeof cspm_marker_menus[s]&&cspm_marker_menus[s].close()})),r.media.post_id=r.post_id,jQuery("a.cspm_popup_marker_media").click(function(e){if(e.preventDefault(),void 0!==r.media&&void 0!==r.media.format){if("link"==r.media.format||"nearby_places"==r.media.format)return!1;cspm_open_media_modal(r.media,s,"yes")}}),(-1<jQuery.inArray(r.media.format,["link","nearby_places"])||cspm_is_media_empty(r.media,s))&&jQuery("a.cspm_popup_marker_media").parent(".cspm_marker_menu_item").hide(),jQuery("a.cspm_open_directions").click(function(e){if(e.preventDefault(),void 0===r.position)return!1;e=jQuery(this).attr("data-travel-mode"),e="https://www.google.com/maps/dir/?api=1&origin=&destination="+r.position.lat()+","+r.position.lng()+"&travelmode="+e;window.open(e)})},afterClose:function(){"object"==typeof cspm_marker_menus[s]&&(cspm_marker_menus[s].destroy(),cspm_marker_menus[s]="",cspm_marker_menus_status[s]="closed")}}})}function cspm_open_marker_menu(e,t,a,s){void 0!==cspm_marker_menus&&("object"==typeof cspm_marker_menus[t]&&cspm_marker_menus[t].close(),cspm_marker_menus[t]=cspm_marker_menu(e,t,a,s),cspm_marker_menus[t].open())}function cspm_nbr_of_visible_markers(e){var a=0;return e.gmap3({get:{name:"marker",tag:"to_cluster",all:!0,callback:function(e){for(var t=0;t<e.length;t++)1==e[t].visible&&a++}}}),a}function cspm_set_markers_visibility(s,r,a,o,i,p,e){return 1==e?null!=a?s.gmap3({get:{name:"marker",tag:"to_cluster",all:!0,callback:function(e){e&&jQuery.each(e,function(e,t){void 0!==t.post_id&&"user_location"!=t.post_id&&-1<jQuery.inArray(a,i["post_id_"+t.post_id][0])&&(parseInt(t.post_id),"function"==typeof t.setVisible&&(t.setVisible(!0),cspm_toggle_marker_connected_layers(s,r,t,"show")),-1===jQuery.inArray(parseInt(t.post_id),p)&&(p[o]=parseInt(t.post_id),o++)),"user_location"==t.post_id&&"function"==typeof t.setVisible&&t.setVisible(!0)})}}}):s.gmap3({get:{name:"marker",tag:"to_cluster",all:!0,callback:function(e){e&&jQuery.each(e,function(e,t){var a;void 0!==t.post_id&&(a=parseInt(t.post_id),-1<jQuery.inArray(a,p)&&"function"==typeof t.setVisible&&(t.setVisible(!0),cspm_toggle_marker_connected_layers(s,r,t,"show")))})}}}):s.gmap3({get:{name:"marker",tag:"to_cluster",all:!0,callback:function(e){e&&jQuery.each(e,function(e,t){void 0!==t.post_id&&(parseInt(t.post_id),"function"==typeof t.setVisible&&(t.setVisible(!0),cspm_toggle_marker_connected_layers(s,r,t,"show")),void 0!==t.post_id&&"user_location"!=t.post_id&&(p[o]=parseInt(t.post_id)),o++)})}}}),p}function cspm_hide_all_markers(a,s){var t=jQuery.Deferred();return a.gmap3({get:{name:"marker",tag:"to_cluster",all:!0,callback:function(e){jQuery.each(e,function(e,t){"function"==typeof t.setVisible&&"user_location"!=t.post_id&&(t.setVisible(!1),cspm_toggle_marker_connected_layers(a,s,t,"hide"))}),t.resolve()}}}),t}function cspm_show_all_markers(a,s){var r=void 0!==progress_map_vars.map_script_args[s]?s:"initial",t=jQuery.Deferred();return a.gmap3({get:{name:"marker",tag:"to_cluster",all:!0,callback:function(e){jQuery.each(e,function(e,t){"function"==typeof t.setVisible&&"user_location"!=t.post_id&&(void 0!==cspm_global_object.posts_to_retrieve[s]&&-1!==jQuery.inArray(parseInt(t.post_id),cspm_global_object.posts_to_retrieve[s])||void 0===cspm_global_object.posts_to_retrieve[s]&&"search_map"!=progress_map_vars.map_script_args[r].map_type)&&(t.setVisible(!0),cspm_toggle_marker_connected_layers(a,s,t,"show"))}),t.resolve()}}}),t}function cspm_get_markers_on_viewport(a,e){var s=[];return a.gmap3({get:{name:"marker",tag:"to_cluster",all:!0,callback:function(e){jQuery.each(e,function(e,t){"function"==typeof t.setVisible&&1==t.visible&&"user_location"!=t.post_id&&cspm_map_bounds_contains_marker(a,t.position.lat(),t.position.lng())&&s.push(t.post_id)})}}}),s}function cspm_toggle_marker_connected_layers(t,e,a,s){var r;void 0!==t&&void 0!==a&&void 0!==s&&(e=void 0===e&&void 0!==a.map_id?a.map_id:e,e=void 0!==progress_map_vars.map_script_args[e]?e:"initial",void 0!==a.post_id&&(r=a.post_id,"true"==progress_map_vars.map_script_args[e].use_kml&&setTimeout(function(){t.gmap3({exec:{name:"kmllayer",tag:"kmlConnectedPost_"+r,all:!0,func:function(e){void 0!==e.object&&"function"==typeof e.object.setMap&&("show"==s?e.object.setMap(t.gmap3("get")):e.object.setMap(null))}}})},100),"true"==progress_map_vars.map_script_args[e].ground_overlays_option&&setTimeout(function(){t.gmap3({exec:{name:"groundoverlay",all:!0,func:function(e){var t=e.object.original_opacity;e.object.connectedPost==r&&void 0!==e.object&&"function"==typeof e.object.setOpacity&&("show"==s?e.object.setOpacity(t):e.object.setOpacity(0))}}})},100),"true"==progress_map_vars.map_script_args[e].draw_polyline&&setTimeout(function(){t.gmap3({exec:{name:"polyline",tag:"polylineConnectedPost_"+r,all:!0,func:function(e){void 0!==e.object&&"function"==typeof e.object.setVisible&&("show"==s?e.object.setVisible(!0):e.object.setVisible(!1))}}})},100),"true"==progress_map_vars.map_script_args[e].draw_polygon&&setTimeout(function(){t.gmap3({exec:{name:"polygon",tag:"polygonConnectedPost_"+r,all:!0,func:function(e){void 0!==e.object&&"function"==typeof e.object.setVisible&&("show"==s?e.object.setVisible(!0):e.object.setVisible(!1))}}})},100)))}function cspm_get_latLngs_bounds(e){var t,a=new google.maps.LatLngBounds,s=[];for(jQuery.each(e,function(e,t){var a=t[0],t=t[1];s.push(new google.maps.LatLng(a,t))}),t=0;t<s.length;t++)a.extend(s[t]);return a}function cspm_get_latLngs_center(e){return cspm_get_latLngs_bounds(e).getCenter()}function cspm_are_bounds_empty(e){return cspm_get_latLngs_bounds(e).isEmpty()}function cspm_zoom_to_address(s,r,e,o,i){r.gmap3({getlatlng:{address:e,callback:function(e,t){var a;"OK"==t?e&&void 0!==e[0].geometry.location&&(a=r.gmap3("get"),o?void 0!==e[0].geometry.bounds?a.fitBounds(e[0].geometry.bounds):a.panTo(e[0].geometry.location):(a.setZoom(parseInt(i)),a.panTo(e[0].geometry.location))):(e=progress_map_vars.geocoding_api_status_codes,cspm_api_status_info(s,e,t,"Geocoding API"))}}})}function cspm_recenter_map(e,t){var a,s,r=void 0!==progress_map_vars.map_script_args[t]?t:"initial";"true"==progress_map_vars.map_script_args[r].autofit?e.gmap3({get:{name:"marker",all:!0},autofit:{}}):void 0!==(t=progress_map_vars.map_script_args[r].center.split(","))?(r=parseInt(progress_map_vars.map_script_args[r].zoom),a=e.gmap3("get"),s=new google.maps.LatLng(t[0],t[1]),a.setZoom(r),setTimeout(function(){"function"==typeof a.panTo&&a.panTo(s)},200)):console.log('PROGRESS MAP: There was a problem centring the map. Check your initial map center coordinates in "Progress Map => Map settings => Map center", then, try again.')}function cspm_open_single_post_modal(e){0==jQuery("#cspm_single_post_modal").length&&jQuery("body").append('<div id="cspm_single_post_modal"></div>');var t=jQuery("#cspm_single_post_modal").iziModal("getState");if(void 0===e||""==e||"opened"==t||"opening"==t)return!1;var a=progress_map_vars.map_script_args.initial.modal_width,s=progress_map_vars.map_script_args.initial.modal_width_unit,r=progress_map_vars.map_script_args.initial.modal_height,o=progress_map_vars.map_script_args.initial.modal_openFullscreen,i=progress_map_vars.map_script_args.initial.modal_allow_fullscreen,p=progress_map_vars.map_script_args.initial.modal_top_margin,t=progress_map_vars.map_script_args.initial.modal_bottom_margin;jQuery("#cspm_single_post_modal").iziModal({title:"<br>",headerColor:progress_map_vars.map_script_args.initial.main_rgb_color,width:parseInt(a)+s,top:parseInt(p),bottom:parseInt(t),borderBottom:!0,padding:0,radius:2,zindex:99999,closeOnEscape:!0,overlay:!0,overlayClose:!0,transitionIn:"fadeInDown",iframe:!0,iframeHeight:parseInt(r),iframeURL:e,fullscreen:"no"!=i,openFullscreen:"no"!=o,bodyOverflow:!0,onClosed:function(e){jQuery("#cspm_single_post_modal").iziModal("destroy")}}),jQuery("#cspm_single_post_modal").iziModal("open")}function cspm_open_media_modal(e,r,t){var s,o,i,p,n,a,_,c,m,l,d,g,u,v,f,h;0==cspm_object_size(e)||cspm_is_media_empty(e,r)||("link"!=(s=e.format)||void 0===e.link||""==e.link?"nearby_places"!=s||void 0===e.post_id||""==e.post_id?"no"!=t&&(o="div.cspm_location_modal",0==jQuery(o).length&&jQuery("body").append('<div class="cspm_location_modal"></div>'),i=function(e,t,a){var s="";return"image"==e?(s+='<img src="'+t+'" />',s+='<a href="'+a+'" target="_blank" class="cspm_open_fullscreen_img cspm_modal_action_btn">',s+='<img src="'+progress_map_vars.plugin_url+'img/svg/fullscreen.svg" />',s+="</a>"):"audio"==e?(s+='<audio class="cspm_audio_player" preload="none" controls controlsList="nodownload" autoplay="true" style="width:100% !important; margin:0 !important;">',s+='<source src="'+t+'">',s+="</audio>"):"embed"==e&&(s+='<div class="cspm_embed_container">',s+=t.replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">"),s+="</div>"),s},p=function(e,t,a){var s=i(e,t,a);jQuery("div.cspm_modal_carousel_preview[data-map-id="+r+"]").fadeOut("slow",function(){jQuery(this).attr("data-type",e).html(s).fadeIn("fast"),"audio"==e&&jQuery(".cspm_audio_player").mediaelementplayer()})},0<jQuery(o).length&&jQuery(o).iziModal({background:"#fefefe",overlayClose:!0,focusInput:!1,borderBottom:!1,width:150,zindex:9999,restoreDefaultContent:!0,transitionIn:"fadeInDown"}),_=r,d=(a=e).format,g=a.gallery,u=a.image,v=a.embed,f=a.audio,h="",h+='<div class="cspm_modal_media_container" data-map-id="'+_+'">',h+='<a href="javascript:void(0)" class="cspm_close_modal cspm_modal_action_btn" data-map-id="'+_+'">',h+='<img src="'+progress_map_vars.plugin_url+'img/svg/close_modal.svg" />',h+="</a>","all"==d||"gallery"==d?(h+='<div class="cspm_modal_carousel_preview cspm_border_top_radius" data-map-id="'+_+'"></div>',"all"!=d&&"gallery"!=d||(h+='<div class="cspm_modal_carousel_container" data-map-id="'+_+'">',h+='<div class="cspm_modal_carousel_prev cspm_border_right_radius cspm_border_shadow cspm_modal_action_btn" data-map-id="'+_+'">',h+='<img src="'+progress_map_vars.plugin_url+'img/svg/prev.svg" />',h+="</div>",h+='<div class="cspm_modal_carousel_next cspm_border_left_radius cspm_border_shadow cspm_modal_action_btn" data-map-id="'+_+'">',h+='<img src="'+progress_map_vars.plugin_url+'img/svg/next.svg" />',h+="</div>",h+='<div class="cspm_modal_carousel" data-map-id="'+_+'">',(c=0)<cspm_object_size(g)&&jQuery.each(g,function(e,t){cspm_object_size(t)&&""!=t.preview&&""!=t.thumb&&(h+='<div class="cspm_modal_carousel_item" data-index="'+(c=e)+'" data-type="image" data-src="'+t.preview+'" data-full-src="'+t.fullscreen+'">',h+='<img class="cspm_border_radius cspm_border_shadow" src="'+t.thumb+'" />',h+="</div>")}),"all"==d&&0<cspm_object_size(u)&&(h+='<div class="cspm_modal_carousel_item" data-index="'+c+'" data-type="image" data-src="'+u.preview+'" data-full-src="'+u.fullscreen+'">',h+='<img class="cspm_border_radius cspm_border_shadow" src="'+u.thumb+'" />',h+="</div>"),"all"==d&&""!=f&&(h+='<div class="cspm_modal_carousel_item cspm_thumb_audio cspm_border_radius cspm_border_shadow" data-index="'+ ++c+'" data-type="audio" data-src="'+f+'" data-full-src="">',h+='<img src="'+progress_map_vars.plugin_url+'img/svg/audio.svg" />',h+="</div>"),"all"==d&&0<cspm_object_size(v)&&void 0!==v.html&&""!=v.html&&(m=v.title,v.type,l=v.thumb,v.provider,a=v.html,g=""!=l?l:progress_map_vars.plugin_url+"img/svg/video.svg",h+='<div class="cspm_modal_carousel_item '+(""!=l?"cspm_thumb_embed":"cspm_default_thumb_embed cspm_border_radius cspm_border_shadow")+'" data-index="'+ ++c+'" data-type="embed" data-src="'+a+'" data-full-src="">',h+='<img src="'+g+'" class="'+(""!=l?"cspm_border_radius cspm_border_shadow":"")+'" title="'+m+'" alt="'+m+'" />',h+="</div>"),h+="</div>",h+="</div>")):("image"==d&&0<cspm_object_size(u)&&(h+='<div class="cspm_modal_media_img cspm_border_radius" data-map-id="'+_+'">'+i(d,u.single,u.fullscreen)+"</div>"),"audio"==d&&""!=f&&(h+='<div class="cspm_modal_media_audio cspm_border_radius cspm_border_shadow" data-map-id="'+_+'">'+i(d,f,"")+"</div>"),"embed"==d&&0<cspm_object_size(v)&&void 0!==v.html&&""!=v.html&&(h+='<div class="cspm_modal_media_embed cspm_border_radius cspm_border_shadow" data-map-id="'+_+'">'+i(d,v.html,"")+"</div>")),n=h+="</div>",jQuery(o).on("opening",function(e,t){jQuery(o).iziModal("startLoading")}),jQuery(o).on("opened",function(e,t){var a;jQuery(o).iziModal("setContent",n),jQuery(".cspm_modal_action_btn").hide(),"all"==s||"gallery"==s?(a=new Siema({selector:"div.cspm_modal_carousel[data-map-id="+r+"]",loop:!0,perPage:{100:1,300:3,400:3,500:4,600:5,700:5},onInit:function(){var e=jQuery("div.cspm_modal_carousel[data-map-id="+r+"] div[data-index=0]").attr("data-type"),t=jQuery("div.cspm_modal_carousel[data-map-id="+r+"] div[data-index=0]").attr("data-src"),a=jQuery("div.cspm_modal_carousel[data-map-id="+r+"] div[data-index=0]").attr("data-full-src");p(e,t,a)},onChange:function(){var e=this.currentSlide,t=jQuery("div.cspm_modal_carousel[data-map-id="+r+"] div[data-index="+e+"]").attr("data-type"),a=jQuery("div.cspm_modal_carousel[data-map-id="+r+"] div[data-index="+e+"]").attr("data-src"),e=jQuery("div.cspm_modal_carousel[data-map-id="+r+"] div[data-index="+e+"]").attr("data-full-src");p(t,a,e)}}),jQuery(document).on("click","div.cspm_modal_carousel[data-map-id="+r+"] div.cspm_modal_carousel_item",function(){var e=jQuery(this).attr("data-index"),t=jQuery("div.cspm_modal_carousel[data-map-id="+r+"] div[data-index="+e+"]").attr("data-type"),a=jQuery("div.cspm_modal_carousel[data-map-id="+r+"] div[data-index="+e+"]").attr("data-src"),e=jQuery("div.cspm_modal_carousel[data-map-id="+r+"] div[data-index="+e+"]").attr("data-full-src");p(t,a,e)}),jQuery(document).on("click","div.cspm_modal_carousel_prev[data-map-id="+r+"]",function(){a.prev(a.perPage)}),jQuery(document).on("click","div.cspm_modal_carousel_next[data-map-id="+r+"]",function(){a.next(a.perPage)}),jQuery("div.cspm_modal_carousel[data-map-id="+r+"] .cspm_modal_carousel_item").imagesLoaded().done(function(e){jQuery(o).iziModal("stopLoading"),jQuery(o).iziModal("setWidth",700),a.resizeHandler(),jQuery(".cspm_modal_action_btn").show()})):"image"==s?jQuery("div.cspm_modal_media_img[data-map-id="+r+"]").imagesLoaded().done(function(e){jQuery(o).iziModal("stopLoading"),jQuery(o).iziModal("setWidth",700),jQuery(".cspm_modal_action_btn").show()}).fail(function(e){jQuery(o).iziModal("close"),cspm_popup_msg(r,"error","Oops!",progress_map_vars.broken_img_msg)||alert("Oops! "+progress_map_vars.broken_img_msg)}):(jQuery(o).iziModal("stopLoading"),jQuery(o).iziModal("setWidth","audio"==s?400:700),jQuery(".cspm_modal_action_btn").show()),"audio"==s&&(jQuery(o).css({"min-height":"auto"}),jQuery(".cspm_audio_player").mediaelementplayer())}),jQuery(o).on("closed",function(e,t){jQuery(o).remove().iziModal("destroy")}),jQuery(o).iziModal("open"),jQuery(document).on("click","a.cspm_close_modal",function(){jQuery(o).iziModal("close")})):""!=progress_map_vars.nearby_places_page_url&&cspm_open_single_post_modal(progress_map_vars.nearby_places_page_url+"?post_id="+e.post_id):cspm_open_single_post_modal(e.link))}function cspm_is_media_empty(e,t){var a=e.format,s=e.gallery,r=e.image,o=e.embed,i=e.audio,e=e.link;return!("all"==a&&(0<cspm_object_size(s)||0<cspm_object_size(r)||0<i.length||void 0!==o.html&&0<o.html.length)||"link"==a&&""!=e||"gallery"==a&&0<cspm_object_size(s)||"image"==a&&0<cspm_object_size(r)||"audio"==a&&0<i.length||"embed"==a&&void 0!==o.html&&0<o.html.length||"nearby_places"==a)}function cspm_open_media_message(e,t){var a;0!=cspm_object_size(e)&&void 0!==e.format&&""!=e.format&&(a=e.format,e.gallery,e.image,e.embed,e.audio,-1===jQuery.inArray(a,["link","nearby_places"])&&"no"==e.marker_click||cspm_is_media_empty(e,t)||""!=(a=progress_map_vars.media_format_msg["format_"+a+"_msg"])&&cspm_popup_msg(t,"info","",a))}function cspm_close_media_message(e){cspm_close_popup_msg(e,"info")}function cspm_popup_msg(e,t,a,s){if("undefined"==typeof iziToast){if("error"==t)return!1;var r=t.replace("success","green").replace("info","blue").replace("warning","orange").replace("error","red").replace("fatal_error","red"),o=jQuery("div.cspm_map_"+r+"_msg_widget[data-map-id="+e+"]");o.text(s).removeClass("fadeOut").addClass("cspm_animated fadeIn").css({display:"block"}),setTimeout(function(){o.removeClass("fadeIn").addClass("fadeOut"),setTimeout(function(){o.css({display:"none"})},100)},3e3)}else{s={class:"cspm_"+t+"_popup_"+e,message:s,animateInside:!0,titleSize:13,messageSize:13,maxWidth:450},a={success:{id:"cspm_success_popup_"+e,position:"topRight",transitionIn:"fadeInLeft",timeout:3e3,displayMode:1,close:!0},info:{position:"topLeft",transitionIn:"fadeIn",timeout:3e3,displayMode:2,close:!1},warning:{id:"cspm_warning_popup_"+e,position:"center",transitionIn:"fadeInUp",timeout:3e3,toastOnce:!0,close:!0},error:{id:"cspm_error_popup_"+e,title:a,icon:"",position:"center",transitionIn:"fadeInUp",timeout:15e3,displayMode:1,close:!0},fatal_error:{id:"cspm_fatal_error_popup_"+e,title:a,icon:"",position:"center",transitionIn:"fadeInUp",timeout:!1,displayMode:1,close:!0,drag:!1},detailed_warning:{id:"cspm_warning_popup_"+e,title:a,position:"center",transitionIn:"fadeInUp",timeout:1e4,displayMode:1,close:!0}},a=jQuery.extend({},s,a[t]);"success"==t?iziToast.success(a):"error"==t||"fatal_error"==t?iziToast.error(a):"warning"==t||"detailed_warning"==t?iziToast.warning(a):iziToast.info(a)}return!0}function cspm_close_popup_msg(e,t){return"undefined"!=typeof iziToast&&(jQuery(".cspm_"+t+"_popup_"+e).each(function(e,t){iziToast.hide({transitionOut:"fadeOutUp"},t)}),!0)}function cspm_groundoverlay_callback(s,e,r){var o,i,p,t,a;void 0===s||"object"!=typeof e||"object"!=typeof r||"always"!=(a=r.visibility)&&"marker_connected"!=a&&(t=r.getBounds().getNorthEast(),a=r.opacity,o=r.original_opacity,i=r.show_icon,p=r.hide_icon,t=r.icon_position&&""!=r.icon_position?r.icon_position:t,a=0==a?i:p,e.gmap3({marker:{latLng:t,tag:"cspm_groundoverlay_marker_"+s,options:{icon:{url:a},marker_id:"groundoverlay_marker"},events:{click:function(e,t,a){0==r.getOpacity()?(e.setIcon(p),r.setOpacity(o)):(e.setIcon(i),r.setOpacity(0)),cspm_close_popup_msg(s,"info")},mouseover:function(){cspm_popup_msg(s,"info","",progress_map_vars.hide_img_overlay_msg)},mouseout:function(){cspm_close_popup_msg(s,"info")}}}}))}function cspm_api_status_info(e,t,a,s){var r,o;void 0!==e&&void 0!==t&&void 0!==a&&(o=r="",void 0!==t.warning[a]?(r=t.warning[a],o="warning"):void 0!==t.error[a]?(r="<br />"+t.error[a],o="error"):void 0!==t.console[a]&&(r=t.console[a],o="console"),""!=r&&(r=r.replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">"),"console"!==o?cspm_popup_msg(e,o,a,r):console.warn('PROGRESS MAP, "'+s+'": ('+a+") "+r)))}function cspm_check_gmaps_failure(s){var r,o='<a href="https://console.cloud.google.com/apis/dashboard" target="_blank">Google Cloud Console</a>',i="<ul><li>Maps JavaScript API</li><li>Directions API</li><li>Distance Matrix API</li><li>Geocoding API</li><li>Places API</li></ul>";window.console&&console.error&&(r=console.error,console.error=function(){var e,t,a;"function"==typeof arguments[0].indexOf&&(t=a=e="",-1!=arguments[0].indexOf("You are using this API without a key")||-1!=arguments[0].indexOf("MissingKeyMapError")?(e="The API Key is missing",a="You are using this map without an API Key. ",a+="Please make sure to add an API Key in the map settings.<br /><br />",a+='If you already have an API Key, visit this <a href="http://www.docs.progress-map.com/cspm_guide/first-steps/insert-the-google-maps-api-key/" target="_blank">link</a> to see where to use it. ',a+='if you did not create any API Key, visit this <a href="http://www.docs.progress-map.com/cspm_guide/first-steps/create-an-api-key-activate-the-required-apis/" target="_blank">link</a> for more details. ',a+='If you are new to Google Maps Platform, visit this <a href="https://developers.google.com/maps/gmp-get-started" target="_blank">link</a> to get started.',t="<br /><br /><u><strong>Note:</strong></u> Once API Key added, it may take up to 5 minutes for settings to take effect!"):-1!=arguments[0].indexOf("DeletedApiProjectMapError")?(e="API project may have been deleted",a="Your API project may have been deleted from your "+o+". ",a+="Please check the project for which you generated the API key that's included in your map settings. ",a+='You can <a href="http://www.docs.progress-map.com/cspm_guide/first-steps/create-an-api-key-activate-the-required-apis/" target="_blank">create a new API project and get a new key</a> in the Cloud Console. ',a+='Once created, please make sure to <a href="http://www.docs.progress-map.com/cspm_guide/first-steps/insert-the-google-maps-api-key/" target="_blank">add the new API Key in the map settings</a>. <br /><br />',a+='If you are new to Google Maps Platform, visit this <a href="https://developers.google.com/maps/gmp-get-started" target="_blank">link</a> to get started.',t="<br /><br /><u><strong>Note:</strong></u> Once API Key added, it may take up to 5 minutes for settings to take effect!"):-1!=arguments[0].indexOf("Directions Service: This API key is not authorized to use this service or API")?(e='The API Key is not authorised to use "Directions API"',a='The API key you provided in your map setting is not authorized to use the "Directions API". ',a+="Please check the API restrictions settings of your API key in your "+o+' to ensure that the "Directions API" is correctly specified in the list of enabled APIs. ',a+='See <a href="https://console.cloud.google.com/project/_/apiui/credential?_ga=2.51736993.949578656.1620363005-1066915472.1487262090" target=_blank">API keys in the Cloud Console</a>. <br /><br />',a+='For more info about fixing this error, visit this <a href="http://www.docs.progress-map.com/cspm_guide/first-steps/create-an-api-key-activate-the-required-apis/" target="_blank">link</a>',t="<br /><br /><u><strong>Note:</strong></u> Once API authorised, it may take up to 5 minutes for settings to take effect!"):-1!=arguments[0].indexOf("Distance Matrix Service: This API key is not authorized to use this service or API")?(e='The API Key is not authorised to use "Distance Matrix API"',a='The API key you provided in your map setting is not authorized to use the "Distance Matrix API". ',a+="Please check the API restrictions settings of your API key in your "+o+' to ensure that the "Distance Matrix API" is correctly specified in the list of enabled APIs. ',a+='See <a href="https://console.cloud.google.com/project/_/apiui/credential?_ga=2.51736993.949578656.1620363005-1066915472.1487262090" target=_blank">API keys in the Cloud Console</a>. <br /><br />',a+='For more info about fixing this error, visit this <a href="http://www.docs.progress-map.com/cspm_guide/first-steps/create-an-api-key-activate-the-required-apis/" target="_blank">link</a>',t="<br /><br /><u><strong>Note:</strong></u> Once API authorised, it may take up to 5 minutes for settings to take effect!"):-1!=arguments[0].indexOf("Geocoding Service: This API key is not authorized to use this service or API")?(e='The API Key is not authorised to use "Geocoding API"',a='The API key you provided in your map setting is not authorized to use the "Geocoding API". ',a+="Please check the API restrictions settings of your API key in your "+o+' to ensure that the "Geocoding API" is correctly specified in the list of enabled APIs. ',a+='See <a href="https://console.cloud.google.com/project/_/apiui/credential?_ga=2.51736993.949578656.1620363005-1066915472.1487262090" target=_blank">API keys in the Cloud Console</a>. <br /><br />',a+='For more info about fixing this error, visit this <a href="http://www.docs.progress-map.com/cspm_guide/first-steps/create-an-api-key-activate-the-required-apis/" target="_blank">link</a>',t="<br /><br /><u><strong>Note:</strong></u> Once API authorised, it may take up to 5 minutes for settings to take effect!"):-1!=arguments[0].indexOf("Places API error: ApiTargetBlockedMapError")?(e='The API Key is not authorised to use "Places API"',a='The API key you provided in your map setting is not authorized to use the "Places API". ',a+="Please check the API restrictions settings of your API key in your "+o+' to ensure that the "Places API" is correctly specified in the list of enabled APIs. ',a+='See <a href="https://console.cloud.google.com/project/_/apiui/credential?_ga=2.51736993.949578656.1620363005-1066915472.1487262090" target=_blank">API keys in the Cloud Console</a>. <br /><br />',a+='For more info about fixing this error, visit this <a href="http://www.docs.progress-map.com/cspm_guide/first-steps/create-an-api-key-activate-the-required-apis/" target="_blank">link</a>',t="<br /><br /><u><strong>Note:</strong></u> Once API authorised, it may take up to 5 minutes for settings to take effect!"):-1!=arguments[0].indexOf("ApiTargetBlockedMapError")?(e="The API Key is not authorised to use Maps APIs",a="The API key you provided in your map setting is not authorized to use all Google Maps APIs required by this plugin. Please check the API restrictions settings of your API key in your "+o+' to ensure that all of the required APIs you need to use are correctly specified in the list of enabled APIs. See <a href="https://console.cloud.google.com/project/_/apiui/credential?_ga=2.51736993.949578656.1620363005-1066915472.1487262090" target=_blank">API keys in the Cloud Console</a>. <br /><br />Here\'s the list of all required APIs: '+i+'For more info about fixing this error, visit this <a href="http://www.docs.progress-map.com/cspm_guide/first-steps/create-an-api-key-activate-the-required-apis/" target="_blank">link</a>',t="<br /><br /><u><strong>Note:</strong></u> Once APIs authorised, it may take up to 5 minutes for settings to take effect!"):-1!=arguments[0].indexOf("InvalidKeyMapError")?(e="Invalid Google Maps API Key",a='The <a href="http://www.docs.progress-map.com/cspm_guide/first-steps/insert-the-google-maps-api-key/" target="_blank">API key included in the plugin</a> is not found in your Google Cloud Console or is incorrect. ',a+="Please make sure you are using a correct API key. You can generate a new API key in the "+o+". <br /><br />",a+='For more infos about generating an API Key, visit this <a href="https://developers.google.com/maps/gmp-get-started#api-key" target="_blank">link</a>',t="<br /><br /><u><strong>Note:</strong></u> Once API Key corrected, it may take up to 5 minutes for settings to take effect!"):-1!=arguments[0].indexOf("Geocoding Service: This API project is not authorized to use this API.")?(e='Missing required API: "Geocoding API"',a='Please make sure to enable the "Geocoding API" from your '+o+'. For more info about fixing this error, visit this <a href="http://www.docs.progress-map.com/cspm_guide/first-steps/create-an-api-key-activate-the-required-apis/" target="_blank">link</a>.',t="<br /><br /><u><strong>Note:</strong></u> Once API enabled, it may take up to 5 minutes for settings to take effect!"):-1!=arguments[0].indexOf("Directions Service: This API project is not authorized to use this API.")?(e='Missing required API: "Directions API"',a='Please make sure to enable the "Directions API" from your '+o+". ",a+='For more info about fixing this error, visit this <a href="http://www.docs.progress-map.com/cspm_guide/first-steps/create-an-api-key-activate-the-required-apis/" target="_blank">link</a>.',t="<br /><br /><u><strong>Note:</strong></u> Once API enabled, it may take up to 5 minutes for settings to take effect!"):-1!=arguments[0].indexOf("Distance Matrix Service: This API project is not authorized to use this API.")?(e='Missing required API: "Distance Matrix API"',a='Please make sure to enable the "Distance Matrix API" from your '+o+". ",a+='For more info about fixing this error, visit this <a href="http://www.docs.progress-map.com/cspm_guide/first-steps/create-an-api-key-activate-the-required-apis/" target="_blank">link</a>.',t="<br /><br /><u><strong>Note:</strong></u> Once API enabled, it may take up to 5 minutes for settings to take effect!"):-1!=arguments[0].indexOf("Places API error: ApiNotActivatedMapError")?(e='Missing required API: "Places API"',a='Please make sure to enable the "Places API" from your '+o+". ",a+='For more info about fixing this error, visit this <a href="http://www.docs.progress-map.com/cspm_guide/first-steps/create-an-api-key-activate-the-required-apis/" target="_blank">link</a>.',t="<br /><br /><u><strong>Note:</strong></u> Once API enabled, it may take up to 5 minutes for settings to take effect!"):-1!=arguments[0].indexOf("ApiNotActivatedMapError")?(e="Missing required API(s)",a="Please make sure to enable all the required APIs from your "+o+". "+i,a+='For more info about fixing this error, visit this <a href="http://www.docs.progress-map.com/cspm_guide/first-steps/create-an-api-key-activate-the-required-apis/" target="_blank">link</a>.',t="<br /><br /><u><strong>Note:</strong></u> Once API enabled, it may take up to 5 minutes for settings to take effect!"):-1!=arguments[0].indexOf("BillingNotEnabledMapError")||-1!=arguments[0].indexOf("BillingNotEnabledMapError")||-1!=arguments[0].indexOf("You must enable Billing on the Google Cloud Project at")?(e="Client or project billing not enabled",a="You have not enabled billing on your project. ",a+='You must enable Billing on the Google Cloud Project associated to this client ID or in your project which is causing this error <a href="https://console.cloud.google.com/project/_/billing/enable?_ga=2.218824337.949578656.1620363005-1066915472.1487262090" target="_blank">here</a>.<br /><br />',a+='If you are new to Google Maps Platform, visit this <a href="https://developers.google.com/maps/gmp-get-started" target="_blank">link</a> to get started.',t="<br /><br /><u><strong>Note:</strong></u> Once billing enabled, it may take up to 5 minutes for settings to take effect!"):-1!=arguments[0].indexOf("ExpiredKeyMapError")?(e="Expired API Key",a="The API key included in the map settings has expired or is not recognized by the system. ",a+="You may receive this error after creating a new API key if you try to use the key before it is recognized by the system. ",a+="Wait a few minutes and try again, or you may need to generate a new API key in your "+o+"<br /><br />",a+='- To create an API Key, visit this <a href="http://www.docs.progress-map.com/cspm_guide/first-steps/create-an-api-key-activate-the-required-apis/" target="_blank">link</a> for all details.<br />',a+='- To use the API Key with your map, visit this <a href="http://www.docs.progress-map.com/cspm_guide/first-steps/insert-the-google-maps-api-key/" target="_blank">link</a> to see where to use it.<br />',a+='- If you are new to Google Maps Platform, visit this <a href="https://developers.google.com/maps/gmp-get-started" target="_blank">link</a> to get started.',t="<br /><br /><u><strong>Note:</strong></u> Once API Key created, it may take up to 5 minutes for settings to take effect!"):-1!=arguments[0].indexOf("InvalidClientIdMapError")?(e="Invalid Client ID",a="The client ID included in the script element that loads the API is invalid, or expired. ",a+="Please make sure you are using your client ID correctly. ",a+='The client ID should start with "gme-" prefix. ',a+="If you see this error even when using your client ID correctly, the client ID may have expired.<br /><br />",a+="If you do not have a Premium Plan or Maps APIs for Work license, you need to use a <strong>key</strong> parameter with your API key instead of the <strong>client</strong> parameter.<br /><br />",a+='See the guide to <a href="https://developers.google.com/maps/documentation/javascript/get-api-key#premium-auth" target="_blank">Premium Plan authentication</a>.',t="<br /><br /><u><strong>Note:</strong></u> If you don't now how to fix this error, contact your Google Account Manager.<br /><br />"):-1!=arguments[0].indexOf("ProjectDeniedMapError")?(e="Project Denied",a="Your request has not been completed. You may be able to find the more details about the error in the Cloud Console.<br /><br />",a+="See your "+o,t="<br /><br /><u><strong>Note:</strong></u> If you don't now how to fix this error, contact your Google Account Manager.<br /><br />"):-1!=arguments[0].indexOf("RefererDeniedMapError")?(e="Referer Denied",a="Your application was blocked for non-compliance with the Google Maps Platform Terms of Service, following several email notifications. ",a+='To appeal the block and have your implementation reviewed, please complete <a href="https://docs.google.com/forms/d/e/1FAIpQLSdndZBL6qgP4iDUx8M7i5_yyf1AVji5OEag8qERRJ6vyqK7Kw/viewform" target="_blank">this form</a>. You will receive a response via email within a few business days.',t=""):-1!=arguments[0].indexOf("RefererNotAllowedMapError")?(e="Referer Not Allowed",a="The current URL loading the Maps JavaScript API has not been added to the list of allowed referrers. Please check the referrer settings of your API key in your "+o+".<br /><br />",a+='See the Maps JavaScript API and <a href="https://developers.google.com/maps/documentation/javascript/get-api-key#restrict_key" target="_blank">Restricting API keys.</a>',t=""):-1!=arguments[0].indexOf("OverQuotaMapError")?(e="Over Quota",a="The number of requests has exceeded the usage limits for the Maps JavaScript API. Your app's requests will work again at the next daily quota reset.<br /><br />",a+="If you are NOT the website owner, there are no steps you can take to fix this error. However, you may want to notify the site owner if possible.<br /><br />",a+='For more details, see the guide to <a href="https://developers.google.com/maps/documentation/javascript/usage" target="_blank">usage limits</a>. The page also explains how you can get higher usage limits.',t=""):-1!=arguments[0].indexOf("ApiProjectMapError")&&(e="API Project Map Error",a="Either the provided API key or the API project with which it is associated, could not be resolved. This error may be temporary. If this error message persists you may need to get a new API key or create a new API project.<br /><br />",a+="If you are NOT the website owner, there are no steps you can take to fix this error. However, you may want to notify the site owner if possible.<br /><br />",a+='- To create an API Key, visit this <a href="http://www.docs.progress-map.com/cspm_guide/first-steps/create-an-api-key-activate-the-required-apis/" target="_blank">link</a> for all details.<br />',a+='- To use the API Key with your map, visit this <a href="http://www.docs.progress-map.com/cspm_guide/first-steps/insert-the-google-maps-api-key/" target="_blank">link</a> to see where to use it.<br />',a+='- If you are new to Google Maps Platform, visit this <a href="https://developers.google.com/maps/gmp-get-started" target="_blank">link</a> to get started.',t="<br /><br /><u><strong>Note:</strong></u> Once API Key created, it may take up to 5 minutes for settings to take effect!"),""!=a&&cspm_popup_msg(s,"fatal_error",e,"<br />"+a+t)),Array.prototype.unshift.call(arguments),r.apply?r.apply(console,arguments):(a=Array.prototype.slice.apply(arguments).join(" "),r(a)),"undefined"!=typeof NProgress&&NProgress.done()})}function cspm_apply_custom_scrollabr(e){jQuery(e).mCustomScrollbar({autoHideScrollbar:!1,mouseWheel:{enable:!0,preventDefault:!0},theme:"dark-2",live:"on"})}function cspm_is_clockwise(e){for(var t=0,a=0;a<e.length-1;a++){var s=e[a],r=e[a+1];t+=(r[0]-s[0])*(r[1]+s[1])}return t<0}function cspm_remove_array_duplicates(e){var a=[],s=0;return jQuery.each(e,function(e,t){-1===jQuery.inArray(t,a)&&(a[s]=t,s++)}),a}function cspm_object_size(e){var t,a=0;for(t in e)e.hasOwnProperty(t)&&a++;return a}function cspm_strpos(e,t,a){a=(e+"").indexOf(t,a||0);return-1!==a&&a}function cspm_deg2rad(e){return.017453292519943295*e}function cspm_arrayDiff(e,t){return e.concat(t).filter(function(e,t,a){return a.indexOf(e)===a.lastIndexOf(e)})}function cspm_convert_img_to_svg(){jQuery("img.cspm_svg").each(function(){var t=jQuery(this),a=t.attr("id"),s=t.attr("class"),e=t.attr("src"),r=t.attr("style");jQuery.get(e,function(e){e=jQuery(e).find("svg");void 0!==a&&(e=e.attr("id",a)),void 0!==s&&(e=e.attr("class",s)),void 0!==r&&(e=e.attr("style",r)),!(e=e.removeAttr("xmlns:a")).attr("viewBox")&&e.attr("height")&&e.attr("width")&&e.attr("viewBox","0 0 "+e.attr("height")+" "+e.attr("width")),t.replaceWith(e)},"xml")})}function cspm_toggle_map_sidebar(e,t,a){if("object"==typeof a&&void 0!==e&&void 0!==t){var s=a.attr("data-action"),a=a.attr("data-side");if(void 0!==s&&void 0!==a)return 0<jQuery(".cspm_sidebar."+a+"[data-map-id="+e+"][data-content-id="+t+"]").length&&jQuery(".cspm_sidebar."+a+"[data-map-id="+e+"][data-content-id="+t+"]").trigger("sidebar:"+s),!1}}function alerte(e){if("object"==typeof e){var t,a="";for(t in e)e.hasOwnProperty(t)&&(a+="["+t+"] => "+e[t]+"\n");alert(a)}else alert(e)}var posts_to_retrieve={};cspm_global_object.posts_to_retrieve={},function(z){for(var e=["left","top","right","bottom"],t=0;t<e.length;++t){var a=e[t];0<z(".cspm_sidebar."+a).length&&z(".cspm_sidebar."+a).sidebar({side:a})}z(document).on("click",".cspm_toggle_map_side",function(){cspm_toggle_map_sidebar(z(this).attr("data-map-id"),z(this).attr("data-content-id"),z(this))}),z.each(z("form.faceted_search_form"),function(e,t){var s,a=z(this).attr("data-map-id"),r=void 0!==progress_map_vars.map_script_args[a]?a:"initial";"function"==typeof z("form.faceted_search_form[data-map-id="+a+"] input").iCheck&&("line"==progress_map_vars.map_script_args[r].faceted_search_input_skin?(s="black"!=progress_map_vars.map_script_args[r].faceted_search_input_color?"-"+progress_map_vars.map_script_args[r].faceted_search_input_color:"",z("form.faceted_search_form[data-map-id="+a+"] input").each(function(){var e=z(this),t=e.next(),a=t.text();t.remove(),e.iCheck({checkboxClass:"icheckbox_line"+s,radioClass:"iradio_line"+s,insert:'<div class="icheck_line-icon"></div>'+a,inheritClass:!0})})):(s="polaris"!=progress_map_vars.map_script_args[r].faceted_search_input_skin&&"futurico"!=progress_map_vars.map_script_args[r].faceted_search_input_skin&&"black"!=progress_map_vars.map_script_args[r].faceted_search_input_color?"-"+progress_map_vars.map_script_args[r].faceted_search_input_color:"",z("form.faceted_search_form[data-map-id="+a+"] input").iCheck({checkboxClass:"icheckbox_"+progress_map_vars.map_script_args[r].faceted_search_input_skin+s,radioClass:"iradio_"+progress_map_vars.map_script_args[r].faceted_search_input_skin+s,increaseArea:"20%",inheritClass:!0})))}),z(document).on("click","div.faceted_search_btn",function(){var e=z(this).attr("id");z("div.cspm_top_element:not(.faceted_search_container_"+e+")").hide(),z("div.faceted_search_container_"+e).slideToggle(0,"easeOutCirc",function(){z(this).is(":visible")&&"function"==typeof jQuery("div.faceted_search_container_"+e).mCustomScrollbar&&(z("div[class^=faceted_search_container] form.faceted_search_form ul").mCustomScrollbar("destroy"),z("div[class^=faceted_search_container] form.faceted_search_form ul").mCustomScrollbar({autoHideScrollbar:!1,mouseWheel:{enable:!0,preventDefault:!0},theme:"dark-2"}))})}),z(document).on("click","a[class^=reset_map_list]",function(e){e.preventDefault();var t=z(this).attr("id"),e=z("form#faceted_search_form_"+t+" input");"function"==typeof e.iCheck&&e.iCheck("uncheck"),z(this).hide(),z("a.cspm_reset_proximities[data-map-id="+t+"]").trigger("click")});var s="function"==typeof z("form.faceted_search_form input").iCheck?"ifChanged":"change";z("form.faceted_search_form input").on(s,function(e){var i=z(this).attr("data-map-id"),o=z(this).attr("data-show-carousel"),p=z("div#codespacing_progress_map_div_"+i),n=void 0!==progress_map_vars.map_script_args[i]?i:"initial",_=progress_map_vars.map_script_args[n].faceted_search_multi_taxonomy_option;"undefined"!=typeof NProgress&&(NProgress.configure({parent:"div#codespacing_progress_map_div_"+i,showSpinner:!0}),NProgress.start()),cspm_hide_all_markers(p,i).done(function(){"undefined"!=typeof NProgress&&NProgress.set(.5),"false"==_&&z("a.reset_map_list_"+i).show(),posts_to_retrieve[i]=[];var e,t=[],a=0,s=0;z("div.faceted_search_container_"+i+" form.faceted_search_form input").each(function(){var e;1==z(this).prop("checked")&&(s++,e=z(this).val(),t=cspm_remove_array_duplicates(t.concat(cspm_set_markers_visibility(p,i,e,a,post_lat_lng_coords[i],posts_to_retrieve[i],!0))),cspm_simple_clustering(p,i),0)}),posts_to_retrieve[i]=t,0==s&&(a=0,"search_map"==progress_map_vars.map_script_args[n].map_type?cspm_hide_all_markers(p,i):(cspm_set_markers_visibility(p,i,null,a,post_lat_lng_coords[i],posts_to_retrieve[i],!1),cspm_simple_clustering(p,i)));var r=e=cspm_object_size(posts_to_retrieve[i]);"autofit"==progress_map_vars.map_script_args[n].faceted_search_drag_map?setTimeout(function(){var o=new google.maps.LatLngBounds;p.gmap3({get:{name:"marker",tag:"to_cluster",all:!0,callback:function(s){var r;s&&(r=0,z.each(s,function(e,t){var a=t.id;void 0!==t&&1==t.visible&&"user_location"!=a&&(o.extend(t.getPosition()),r++),e==s.length-1&&setTimeout(function(){0<r?p.gmap3("get").fitBounds(o):cspm_recenter_map(p,i),cspm_zoom_in_and_out(p)},100)}))}}})},100):"drag"==progress_map_vars.map_script_args[n].faceted_search_drag_map&&0<r&&(r=post_lat_lng_coords[i][posts_to_retrieve[i][0]].split("_"),cspm_center_map_at_point(p,i,r[0],r[1],"zoom")),cspm_global_object.posts_to_retrieve[i]=posts_to_retrieve[i],"yes"==progress_map_vars.map_script_args[n].show_posts_count&&z("span.the_count_"+i).empty().html(e),"no"==progress_map_vars.map_script_args[n].sync_carousel_to_viewport&&setTimeout(function(){cspm_rewrite_carousel(i,o,posts_to_retrieve[i])},100),z("div.countries_container_"+i).length&&(z("li.cspm_country_name[data-map-id="+i+"]").removeClass("selected"),z("div.countries_container_"+i).hide()),z("a.cspm_reset_proximities[data-map-id="+i+"]").trigger("click"),"undefined"!=typeof NProgress&&NProgress.done()})}),z(document).on("click","ul[id^=cspm_carousel_] li",function(){var e,t,a=z(this).attr("data-map-id");"fullscreen-map"!=map_layout[a]&&"fit-in-map"!=map_layout[a]&&(t=void 0!==progress_map_vars.map_script_args[a]?a:"initial",e=z("ul#cspm_carousel_"+a).data("jcarousel"),a=z(this).attr("jcarouselindex"),t="yes"==progress_map_vars.map_script_args[t].connect_carousel_with_map,cspm_call_carousel_item(e,a),cspm_carousel_item_request(e,parseInt(a),t))}).css("cursor","pointer"),"function"==typeof z("input.cspm_sf_slider_range").ionRangeSlider&&z("input.cspm_sf_slider_range").ionRangeSlider({type:"single",skin:"round",grid:!0}),z(document).on("click","div.search_form_btn",function(e){var t=z(this).attr("id");z("div.cspm_top_element:not(.search_form_container_"+t+")").hide(),z("div.search_form_container_"+t).slideToggle(0,"easeOutCirc",function(){z(this).is(":visible")&&void 0!==e.originalEvent&&z("form#search_form_"+t+" input[name=cspm_address]").trigger("focus")})}),z(document).on("click","a.cspm_geotarget_search_btn",function(e){e.preventDefault();var o=z(this).attr("data-map-id");progress_map_vars.map_script_args[o];"undefined"!=typeof NProgress&&(NProgress.configure({parent:"div#codespacing_progress_map_div_"+o,showSpinner:!0}),NProgress.start());var i=z("a.cspm_geotarget_search_btn[data-map-id="+o+"]").attr("data-latLng"),p=z("div#codespacing_progress_map_div_"+o);p.gmap3({getgeoloc:{callback:function(t){var a,s,e,r;t?(a=t.lat(),s=t.lng(),i!=a+","+s&&p.gmap3({getaddress:{latLng:t,callback:function(e){e=e&&e[1]?e&&e[1].formatted_address:t.lat()+","+t.lng();z("form#search_form_"+o+" input[name=cspm_address]").val(e);e="<strong>Your address:</strong> "+e;e+="<br /><strong>Your position:</strong> "+t.lat()+","+t.lng(),cspm_popup_msg(o,"info","",e),z("a.cspm_geotarget_search_btn[data-map-id="+o+"]").attr("data-latLng",a+","+s)}}})):(e=progress_map_vars.geoErrorTitle,r=progress_map_vars.geoErrorMsg,cspm_popup_msg(o,"error",e,"<br />"+r)||alert(e+"\n\n"+r),console.log("PROGRESS MAP: "+progress_map_vars.geoDeprecateMsg))}}}),"undefined"!=typeof NProgress&&NProgress.done()}),z(document).on("click","a[class^=cspm_submit_search_form_]",function(e){e.preventDefault();var p=z(this).attr("data-map-id"),n=z(this).attr("data-open-btn"),_=void 0!==progress_map_vars.map_script_args[p]?p:"initial";"undefined"!=typeof NProgress&&(NProgress.configure({parent:"div#codespacing_progress_map_div_"+p,showSpinner:!0}),NProgress.start()),cspm_close_popup_msg(p,"error");var c=z(this).attr("data-show-carousel"),t=progress_map_vars.map_script_args[_].before_search_address+z("form#search_form_"+p+" input[name=cspm_address]").val()+progress_map_vars.map_script_args[_].after_search_address,m="true"==progress_map_vars.map_script_args[_].sf_circle_option,l="true"==progress_map_vars.map_script_args[_].sf_edit_circle,d=z("form#search_form_"+p+" input[name=cspm_decimals_distance]").val();e=""!=d&&void 0!==e.isTrigger?d:z("form#search_form_"+p+" input[name=cspm_distance]").val();var g,u=z("form#search_form_"+p+" input[name=cspm_distance_unit]").val();g="metric"==u?1e3*e:1.60934*e*1e3;var v,f,h=z("form#search_form_"+p+" input[name=cspm_distance]").attr("data-min"),y=z("form#search_form_"+p+" input[name=cspm_distance]").attr("data-max");f="metric"==u?(v=1e3*h,1e3*y):(v=1.60934*h*1e3,1.60934*y*1e3);var b=z("div#codespacing_progress_map_div_"+p),k={};k[p]=[],(new google.maps.Geocoder).geocode({address:t},function(e,t){var r,o,a,s,i;t==google.maps.GeocoderStatus.OK?(s=e[0].geometry.location,r=s.lat(),o=s.lng(),b.gmap3({get:{name:"marker",tag:"to_cluster",all:!0,callback:function(e){var s=0;z.each(e,function(e,t){var a=t.id,t=t.position;"user_location"!=a&&cspm_compute_distance_between(r,o,t.lat(),t.lng())<g&&(k[p][s]=parseInt(a),s++)}),0<cspm_object_size(k[p])?("yes"==n&&z("div.search_form_container_"+p).hide(),cspm_hide_all_markers(b,p).done(function(){var a;cspm_center_map_at_point(b,p,r,o,"zoom"),cspm_set_markers_visibility(b,p,null,0,post_lat_lng_coords[p],k[p],!0),cspm_simple_clustering(b,p),cspm_global_object.posts_to_retrieve[p]=k[p],m&&(a=0,b.gmap3({clear:{tag:"search_circle",all:!0},circle:{tag:"search_circle",options:{center:[r,o],radius:g,fillColor:progress_map_vars.map_script_args[_].fillColor,fillOpacity:progress_map_vars.map_script_args[_].fillOpacity,strokeColor:progress_map_vars.map_script_args[_].strokeColor,strokeOpacity:progress_map_vars.map_script_args[_].strokeOpacity,strokeWeight:parseInt(progress_map_vars.map_script_args[_].strokeWeight),editable:l},callback:function(e){b.gmap3("get").fitBounds(e.getBounds())},events:{mouseover:function(e){var t;!l||0!=a&&6!=a||(t=progress_map_vars.resize_circle_msg,cspm_popup_msg(p,"info","",t),6==a&&(a=1)),a++},mouseout:function(e){l&&cspm_close_popup_msg(p,"info")},radius_changed:function(t){var e,a,s;l&&(cspm_close_popup_msg(p,"info"),e=t.getRadius(),a="metric"==u?"Km":"Miles",f<e?(t.setRadius(f),s=progress_map_vars.circle_reached_max_msg+" ("+y+a+")",cspm_popup_msg(p,"warning","",s)):e<v&&(t.setRadius(v),s=progress_map_vars.circle_reached_min_msg+" ("+h+a+")",cspm_popup_msg(p,"warning","",s)),setTimeout(function(){var e=t.getRadius();e="metric"==u?e/1e3:e/1609.34,z("form#search_form_"+p+" input[name=cspm_decimals_distance]").attr("value",e),z("input.cspm_sf_slider_range[data-map-id="+p+"]").data("ionRangeSlider").update({from:e}),cspm_hide_all_markers(b,p).done(function(){z("a.cspm_submit_search_form_"+p).trigger("click"),cspm_zoom_in_and_out(b)})},500))}}}})),z("a.cspm_reset_search_form_"+p).show(),"yes"==progress_map_vars.map_script_args[_].show_posts_count&&z("span.the_count_"+p).empty().html(k[p].length),"no"==progress_map_vars.map_script_args[_].sync_carousel_to_viewport&&setTimeout(function(){cspm_rewrite_carousel(p,c,k[p])},500)})):(e=progress_map_vars.map_script_args[_].no_location_found_msg,cspm_popup_msg(p,"warning","",e),""!=d&&m&&l&&(z("form#search_form_"+p+" input[name=cspm_decimals_distance]").val(""),"yes"==progress_map_vars.map_script_args[_].show_posts_count&&z("span.the_count_"+p).empty().html(k[p].length),"no"==progress_map_vars.map_script_args[_].sync_carousel_to_viewport&&setTimeout(function(){cspm_rewrite_carousel(p,c,k[p])},500)))}}})):t==google.maps.GeocoderStatus.ZERO_RESULTS?(a=progress_map_vars.map_script_args[_].bad_address_msg,e=progress_map_vars.map_script_args[_].bad_address_sug_1,s=progress_map_vars.map_script_args[_].bad_address_sug_2,i=progress_map_vars.map_script_args[_].bad_address_sug_3,cspm_popup_msg(p,"error",a,"<br />"+e+"<br />"+s+"<br />"+i)||alert(a+"\n\n"+e+"\n"+s+"\n"+i)):(i=progress_map_vars.geocoding_api_status_codes,cspm_api_status_info(p,i,t,"Geocoding API")),z("div.countries_container_"+p).length&&(z("li.cspm_country_name[data-map-id="+p+"]").removeClass("selected"),z("div.countries_container_"+p).hide()),z("a.cspm_reset_proximities[data-map-id="+p+"]").trigger("click"),"undefined"!=typeof NProgress&&NProgress.done()})}),z(document).on("click","a[class^=cspm_reset_search_form]",function(e){e.preventDefault();var t=z(this).attr("data-map-id"),a=void 0!==progress_map_vars.map_script_args[t]?t:"initial";"undefined"!=typeof NProgress&&(NProgress.configure({parent:"div#codespacing_progress_map_div_"+t,showSpinner:!0}),NProgress.start());var s=z(this).attr("data-show-carousel"),e=z("div#codespacing_progress_map_div_"+t);posts_to_retrieve[t]=[],"search_map"==progress_map_vars.map_script_args[a].map_type?cspm_hide_all_markers(e,t):(cspm_set_markers_visibility(e,t,null,0,post_lat_lng_coords[t],posts_to_retrieve[t],!1),cspm_simple_clustering(e,t)),cspm_global_object.posts_to_retrieve[t]=posts_to_retrieve[t],"yes"==progress_map_vars.map_script_args[a].show_posts_count&&z("span.the_count_"+t).empty().html(posts_to_retrieve[t].length),"undefined"!=typeof NProgress&&NProgress.set(.5),e.gmap3({clear:{tag:"search_circle",all:!0}}),cspm_recenter_map(e,t),cspm_zoom_in_and_out(e),z("form#search_form_"+t+" input#cspm_address_"+t).val("").trigger("focus"),"no"==progress_map_vars.map_script_args[a].sync_carousel_to_viewport&&setTimeout(function(){cspm_rewrite_carousel(t,s,posts_to_retrieve[t])},500),z("div.countries_container_"+t).length&&(z("li.cspm_country_name[data-map-id="+t+"]").removeClass("selected"),z("div.countries_container_"+t).hide()),z("a.cspm_reset_proximities[data-map-id="+t+"]").trigger("click"),z(this).removeClass("fadeIn").hide("fast",function(){"undefined"!=typeof NProgress&&NProgress.done()})}),z(document).on("click","div.toggle-carousel-bottom, div.toggle-carousel-top",function(){var e=z(this).attr("data-map-id");z("div#cspm_carousel_container[data-map-id="+e+"]").slideToggle("slow",function(){cspm_init_carousel(null,e)})}),z(document).on("click","button#cspm_search_btn",function(){var o=z(this).attr("data-map-id"),e=z("input[name=cspm_search_address]").val(),i=z("div#cspm_frontend_form_"+o);i.gmap3({clear:{name:"marker",all:!0}}),(new google.maps.Geocoder).geocode({address:e},function(e,t){var a,s,r;t==google.maps.GeocoderStatus.OK?(a=e[0].geometry.location.lat(),s=e[0].geometry.location.lng(),setTimeout(function(){cspm_center_map_at_point(i,o,a,s,"zoom"),i.gmap3({marker:{latLng:e[0].geometry.location,options:{draggable:!0}}})},500)):(r=progress_map_vars.geocoding_api_status_codes,cspm_api_status_info(o,r,t,"Geocoding API"))})}),z(document).on("keypress","input#cspm_search_address",function(e){13==e.keyCode&&e.preventDefault()}),z(document).on("click","button#cspm_get_pinpoint",function(){var e=z(this).attr("data-map-id");z("div#cspm_frontend_form_"+e).gmap3({get:{name:"marker",callback:function(e){e&&(z("input#cspm_latitude").val(e.getPosition().lat()),z("input#cspm_longitude").val(e.getPosition().lng()))}}})}),z(document).on("click","div.cspm_geotarget_btn",function(){var e=z(this).attr("data-map-id"),t=void 0!==progress_map_vars.map_script_args[e]?e:"initial";cspm_geolocate(z("div#codespacing_progress_map_div_"+e),e,progress_map_vars.map_script_args[t].show_user,progress_map_vars.map_script_args[t].user_marker_icon,progress_map_vars.map_script_args[t].user_marker_size,progress_map_vars.map_script_args[t].user_circle,progress_map_vars.map_script_args[t].user_map_zoom,!0)});var o={};z(document).on("click","div.countries_btn",function(){var r=z(this).attr("data-map-id");z("div.cspm_top_element:not(.countries_container_"+r+")").hide(),z("div.countries_container_"+r).slideToggle(0,"easeOutCirc",function(){var e,n,t=z(this);z(this).is(":visible")&&(e=z(this).attr("data-search-input"),n=z(this).attr("data-show-flag"),void 0===o[r]&&(o[r]=tail.select(".cspm_countries_list[data-map-id="+r+"]",{classNames:"cspm_custom_tailselect",multiple:!1,multiShowCount:!1,multiSelectAll:!1,startOpen:!0,stayOpen:!0,openAbove:!1,height:215,search:"yes"==e&&"only"!=n,searchMarked:!0,width:"only"==n?55:null,deselect:!0,hideSelected:!0,cbLoopItem:function(e,t,a){var s=document.createElement("li");if(e.option.hasAttributes())for(var r=e.option.attributes,o=r.length-1;0<=o;o--)s.setAttribute(r[o].name,r[o].value);e.key;var i=s.getAttribute("data-country-name"),p=s.getAttribute("data-country-code");return s.className="dropdown-option cspm_dropdown_no_icon"+(e.selected?" selected":"")+(e.disabled?" disabled":""),a&&0<a.length&&this.con.searchMarked&&(i=i.replace(new RegExp("("+a+")","i"),"<mark>$1</mark>")),s.innerHTML='<div class="item-inner">',-1!==jQuery.inArray(n,["true","only"])&&(s.innerHTML+='<div class="cspm_flg_icon cspm_'+p+'"></div>'),"only"!=n&&(s.innerHTML+=i),s.innerHTML+="</div>",s},cbComplete:function(){t.find("input.search-input[type=text]").attr("placeholder",progress_map_vars.type_to_search),cspm_apply_custom_scrollabr(".cspm_custom_tailselect.tail-select .select-dropdown .dropdown-inner")}}).on("change",function(e,t){var a,s;"select"==t&&(a=z(e.option).attr("data-country-name"),s=z(e.option).attr("data-country-code"),t="",-1!==jQuery.inArray(n,["true","only"])&&(t='<div class="cspm_flg_icon cspm_'+s+'"></div>'),"only"!=n&&(t+=a),o[r].updateLabel(t),z("div.countries_container_"+r).hide(),"undefined"!=typeof NProgress&&(NProgress.configure({parent:"div#codespacing_progress_map_div_"+r,showSpinner:!0}),NProgress.start()),e=void 0!==progress_map_vars.map_script_args[r]?r:"initial",s="autofit"==progress_map_vars.map_script_args[e].country_zoom_or_autofit,t=progress_map_vars.map_script_args[e].country_zoom_level,e=z("div#codespacing_progress_map_div_"+r),"undefined"!=typeof NProgress&&NProgress.set(.5),cspm_zoom_to_address(r,e,a,s,t),"undefined"!=typeof NProgress&&NProgress.done())})))})}),z(document).on("click","div.cspm_recenter_map_btn",function(){var e=z(this).attr("data-map-id"),t=z("div#codespacing_progress_map_div_"+e);"undefined"!=typeof NProgress&&(NProgress.configure({parent:"div#codespacing_progress_map_div_"+e,showSpinner:!0}),NProgress.start()),cspm_recenter_map(t,e),cspm_zoom_in_and_out(t),z("div.countries_container_"+e).length&&(z("li.cspm_country_name[data-map-id="+e+"]").removeClass("selected"),z("div.countries_container_"+e).hide()),"undefined"!=typeof NProgress&&NProgress.done()});var O={},i={};z(document).on("click","div.cspm_proximities_btn",function(){var r=z(this).attr("data-map-id");z("div#codespacing_progress_map_div_"+r);z("div.cspm_top_element:not(.cspm_proximities_container_"+r+")").hide(),z("div.cspm_proximities_container_"+r).slideToggle(0,"easeOutCirc",function(){var n;z(this).is(":visible")&&(n=z(this).attr("data-show-proximity-icon"),void 0===i[r]&&(i[r]=tail.select(".cspm_proximities_list[data-map-id="+r+"]",{classNames:"cspm_custom_tailselect",multiple:!1,multiShowCount:!1,multiSelectAll:!1,startOpen:!1,stayOpen:!1,openAbove:!1,height:195,width:195,search:!1,deselect:!0,hideSelected:!0,cbLoopItem:function(e,t,a){var s=document.createElement("li");if(e.option.hasAttributes())for(var r=e.option.attributes,o=r.length-1;0<=o;o--)s.setAttribute(r[o].name,r[o].value);e.key;var i=s.getAttribute("data-proximity-id"),p=s.getAttribute("data-proximity-name");return s.className="dropdown-option cspm_dropdown_no_icon"+(e.selected?" selected":"")+(e.disabled?" disabled":""),s.className+=" cspm_proximity_name",s.innerHTML='<div class="item-inner">',-1!==jQuery.inArray(n,["true","only"])&&(s.innerHTML+='<div class="cspm_np_icon cspm_'+i+'"></div>'),"only"!=n&&(s.innerHTML+=p),s.innerHTML+="</div>",s},cbComplete:function(){cspm_apply_custom_scrollabr(".cspm_custom_tailselect.tail-select .select-dropdown .dropdown-inner")}}).on("change",function(e,t){var a,s;"select"==t&&(a=z(e.option).attr("data-proximity-id"),t=z(e.option).attr("data-proximity-name"),s="",-1!==jQuery.inArray(n,["true","only"])&&(s='<div class="cspm_np_icon cspm_'+a+'"></div>'),"only"!=n&&(s+=t),function(_,e,c,t){var m,l,d=e.attr("data-map-id"),g=jQuery("div#codespacing_progress_map_div_"+d),u=g.gmap3("get"),v=z("div.cspm_proximities_container_"+d).find("li.cspm_proximity_name[data-map-id="+d+"][data-proximity-id="+c+"]"),f=(v.attr("data-proximity-name"),v.attr("data-distance-unit")),h=v.attr("data-radius"),y=v.attr("data-initial-radius"),b=(v.attr("data-travel-mode"),"true"==v.attr("data-draw-circle")),k="true"==v.attr("data-edit-circle"),w=v.attr("data-marker-type"),a=v.attr("data-marker-latlng"),I=v.attr("data-min-radius"),x=v.attr("data-max-radius");"METRIC"==f?(s=h/1e3,m=I/1e3,l=x/1e3):(s=h/1609.34,s/=1e3,m=I/1609.34,m/=1e3,l=x/1609.34,l/=1e3);var P=v.attr("data-min-radius-attempt"),j=v.attr("data-max-radius-attempt"),e=!1;if(""==a||void 0===a){var s=progress_map_vars.no_marker_selected_msg;cspm_popup_msg(d,"warning","",s)}else{"undefined"!=typeof NProgress&&(NProgress.configure({parent:"div#codespacing_progress_map_div_"+d,showSpinner:!0}),NProgress.start());var A=a.replace("(","").replace(")","").split(",");if(void 0===A[0]&&void 0===A[1])return"undefined"!=typeof NProgress&&NProgress.done();g.gmap3({clear:{tag:["cspm_nearby_point_"+d,"cspm_nearby_circle_"+d]}});null!=O[d]&&(O[d].setMap(null),O[d]=null),O[d]=new google.maps.DirectionsRenderer({suppressMarkers:!0,suppressInfoWindows:!0,draggable:!1,preserveViewport:!1,suppressBicyclingLayer:!0}),O[d].setMap(u);var a={location:new google.maps.LatLng(A[0],A[1]),radius:h,types:[c]},C=new google.maps.places.PlacesService(u),Q={};Q[d]=new Array,"undefined"!=typeof NProgress&&NProgress.set(.5);var M=new google.maps.LatLngBounds;C.nearbySearch(a,function(e,t,a){if(t===google.maps.places.PlacesServiceStatus.OK){if(z("div.cspm_proximities_container_"+d).is(":visible")&&z("div.cspm_proximities_container_"+d).slideToggle(),0<e.length){for(var s=0,r=0;r<e.length;r++){var o,i=e[r].place_id,p=e[r].geometry.location,n=e[r].name;-1==jQuery.inArray(i,Q[d])&&-1!=jQuery.inArray(c,e[r].types)&&(Q[d].push(i),o="default"==w?"":progress_map_vars.plugin_url+"img/nearby/pointers/"+c+"-pin.png",g.gmap3({marker:{latLng:p,title:n,tag:"cspm_nearby_point_"+d,options:{icon:o,animation:google.maps.Animation.DROP,opacity:1,placeID:i,placeName:n},callback:function(e){M.extend(e.getPosition())},events:{mouseover:function(e){var t;0!=s&&10!=s||(t=progress_map_vars.show_nearby_details_msg,cspm_popup_msg(d,"info","",t),10==s&&(s=1)),s++},mouseout:function(e){cspm_close_popup_msg(d,"info")},click:function(p,e,t){var n=new google.maps.LatLng(A[0],A[1]),_=p.position,c=v.attr("data-travel-mode");z("a.cspm_switch_np_travel_mode[data-map-id="+d+"]").attr("data-origin",n).attr("data-destination",_),g.gmap3({getroute:{options:{origin:n,destination:_,travelMode:google.maps.DirectionsTravelMode[c.toUpperCase()],unitSystem:google.maps.UnitSystem[f.toUpperCase()]},callback:function(e,t){var r,o,i,a;void 0!==e&&"OK"===t?(O[d].setDirections(e),a=e.routes[0],r=a.legs[0].distance.text,o=a.legs[0].duration.text,i=p.placeName,C.getDetails({placeId:p.placeID,fields:["place_id","url"]},function(e,t){var a,s;t===google.maps.places.PlacesServiceStatus.OK?(a=n.toString().replace("(","").replace(")",""),s=_.toString().replace("(","").replace(")",""),s='<div style="padding:10px 5px; margin-bottom:5px; border-bottom:1px solid #eee; text-align:center;"><strong><a href="'+e.url+'" target="_blank">'+i+'</a></strong></div><div style="padding:5px; text-align:center;"><span style="text-align:center; padding:5px; margin-right:15px;"><img src="'+progress_map_vars.plugin_url+'img/svg/route_distance.svg" style="width:15px; margin-right:5px" /><span class="cspm_infowindow_distance">'+r+'</span></span><span style="text-align:center; padding:5px;"><img src="'+progress_map_vars.plugin_url+'img/svg/clock.svg" style="width:15px; margin-right:5px" /><span class="cspm_infowindow_duration">'+o+'</span></span><span style="text-align:center; padding:5px;"><img src="'+progress_map_vars.plugin_url+'img/svg/directions.svg" style="width:15px; margin-right:5px" /><span class="cspm_infowindow_directions"><a href="https://www.google.com/maps/dir/?api=1&origin='+a+"&destination="+s+"&destination_place_id="+e.place_id+"&travelmode="+c.toLowerCase()+'" target="_blank">Directions</a></span></span></div>',infowindow=g.gmap3({get:{name:"infowindow",id:"nearby_place"}}),infowindow?(infowindow.open(u,p),infowindow.setContent(s)):g.gmap3({infowindow:{anchor:p,id:"nearby_place",options:{content:s}}})):(s=progress_map_vars.places_api_status_codes,cspm_api_status_info(d,s,t,"Places API"))})):(a=progress_map_vars.directions_api_status_codes,cspm_api_status_info(d,a,t,"Directions API")),"undefined"!=typeof NProgress&&NProgress.done()}}})}}}}))}a.hasNextPage?a.nextPage():b?setTimeout(function(){var a=0,e=void 0!==progress_map_vars.map_script_args.initial.main_hex_color?progress_map_vars.map_script_args.initial.main_hex_color:"#189AC9";g.gmap3({circle:{tag:"cspm_nearby_circle_"+d,options:{center:[A[0],A[1]],radius:parseInt(h),fillColor:e,fillOpacity:.05,strokeColor:e,strokeOpacity:.5,strokeWeight:5,editable:k},callback:function(e){g.gmap3("get").fitBounds(M),"undefined"!=typeof NProgress&&NProgress.done()},events:{mouseover:function(e){var t;!k||0!=a&&6!=a||(t=progress_map_vars.resize_circle_msg,cspm_popup_msg(d,"info","",t),6==a&&(a=1)),a++},mouseout:function(e){k&&cspm_close_popup_msg(d,"info")},radius_changed:function(e){var t,a,s,r;k&&(t=e.getRadius(),a="METRIC"==f?"Km":"Miles",x<t?(e.setRadius(parseInt(x)),v.attr("data-radius",x).attr("data-max-radius-attempt",parseInt(j)+1),r="max",s=progress_map_vars.max_search_radius_msg+" ("+Math.floor(l)+a+")",cspm_popup_msg(d,"warning","",s)):t<I?(e.setRadius(parseInt(I)),v.attr("data-radius",I).attr("data-min-radius-attempt",parseInt(P)+1),r="min",s=progress_map_vars.min_search_radius_msg+" ("+Math.floor(m)+a+")",cspm_popup_msg(d,"warning","",s)):(r="",v.attr("data-radius",t).attr("data-min-radius-attempt",parseInt(0)).attr("data-max-radius-attempt",parseInt(0))),setTimeout(function(){var e=v.attr("data-min-radius-attempt"),t=v.attr("data-max-radius-attempt");(0==e&&0==t||"min"==r&&e<=1||"max"==r&&t<=1)&&(_.options.all("unselect"),setTimeout(function(){v.trigger("click")},10))},500))}}}})},500):(g.gmap3("get").fitBounds(M),"undefined"!=typeof NProgress&&NProgress.done())}}else{a=progress_map_vars.places_api_status_codes;cspm_api_status_info(d,a,t,"Places API"),v.attr("data-radius",y).attr("data-min-radius-attempt",0).attr("data-max-radius-attempt",0),_.options.all("unselect"),"undefined"!=typeof NProgress&&NProgress.done()}}),setTimeout(function(){z("a.cspm_reset_proximities[data-map-id="+d+"]").show()},1e3),e=!0}t(e)}(i[r],z(e.option),a,function(e){e?i[r].updateLabel(s):i[r].options.all("unselect")}))})))})}),z(document).on("click","a.cspm_switch_np_travel_mode",function(e){e.preventDefault();var t,r=z(this).attr("data-map-id"),o=z(this).attr("data-travel-mode"),a=z(this).attr("data-origin"),s=z(this).attr("data-destination"),i=z(this).attr("data-distance-unit");z(this).hasClass("active")||(z.each(z("a.cspm_switch_np_travel_mode[data-map-id="+r+"] svg.cspm_svg"),function(e,t){z(this).removeClass("cspm_svg_white").addClass("cspm_svg_colored")}),z("a.cspm_switch_np_travel_mode[data-map-id="+r+"]").removeClass("active cspm_bg_hex_hover"),z(this).addClass("active cspm_bg_hex_hover"),z("a.cspm_switch_np_travel_mode[data-map-id="+r+"][data-travel-mode="+o+"] svg.cspm_svg").removeClass("cspm_svg_colored").addClass("cspm_svg_white"),(e=jQuery("div#codespacing_progress_map_div_"+r)).gmap3("get"),z("li.cspm_proximity_name[data-map-id="+r+"]").attr("data-travel-mode",o),""==a&&""==s||(!(void 0===(a=a.replace("(","").replace(")","").split(","))[0]&&void 0===a[1]||void 0===(t=s.replace("(","").replace(")","").split(","))[0]&&void 0===t[1])?("undefined"!=typeof NProgress&&(NProgress.configure({parent:"div#codespacing_progress_map_div_"+r,showSpinner:!0}),NProgress.start()),e.gmap3({getroute:{options:{origin:new google.maps.LatLng(a[0],a[1]),destination:new google.maps.LatLng(t[0],t[1]),travelMode:google.maps.DirectionsTravelMode[o.toUpperCase()],unitSystem:google.maps.UnitSystem[i.toUpperCase()]},callback:function(e,t){var a,s;void 0!==e&&"OK"===t?(O[r].setDirections(e),e=(a=e.routes[0]).legs[0].distance.text,a=a.legs[0].duration.text,z("span.cspm_infowindow_distance").text(e),z("span.cspm_infowindow_duration").text(a),void 0!==(a=z("span.cspm_infowindow_directions a").attr("href"))&&(s=(s=a.split("&"))[0]+"&"+s[1]+"&"+s[2]+"&"+s[3]+"&travelmode="+o.toLowerCase(),z("span.cspm_infowindow_directions a").attr("href",s))):(s=progress_map_vars.directions_api_status_codes,cspm_api_status_info(r,s,t,"Directions API")),"undefined"!=typeof NProgress&&NProgress.done()}}})):"undefined"!=typeof NProgress&&NProgress.done()))}),z(document).on("click","a.cspm_reset_proximities",function(e){e.preventDefault();var t=z(this).attr("data-map-id");"undefined"!=typeof NProgress&&(NProgress.configure({parent:"div#codespacing_progress_map_div_"+t,showSpinner:!0}),NProgress.start());e=jQuery("div#codespacing_progress_map_div_"+t),e.gmap3("get");z(this).hide(),z("li.cspm_proximity_name[data-map-id="+t+"]").attr("data-marker-latlng",""),void 0!==i[t]&&(i[t].options.all("unselect"),i[t].updateLabel(i[t].con.placeholder)),e.gmap3({clear:{tag:["cspm_nearby_point_"+t,"cspm_nearby_circle_"+t]}}),void 0!==O[t]&&O[t].setMap(null),"undefined"!=typeof NProgress&&NProgress.done()}),z(document).on("click","div.cspm_heatmap_btn",function(){var e=z(this).attr("data-map-id"),t=z(this).attr("data-toggle-markers"),a=z("div#codespacing_progress_map_div_"+e),s=a.gmap3("get");heatmap[e].getMap()?(z(this).removeClass("cspm_active_btn cspm_bg_rgb_hover"),z(this).find("svg.cspm_svg").removeClass("cspm_svg_white").addClass("cspm_svg_colored"),heatmap[e].setMap(null),"yes"==t&&(cspm_show_all_markers(a,e),cspm_zoom_in_and_out(a))):(z(this).addClass("cspm_active_btn cspm_bg_rgb_hover"),z(this).find("svg.cspm_svg").removeClass("cspm_svg_colored").addClass("cspm_svg_white"),heatmap[e].setMap(s),"yes"==t&&(cspm_hide_all_markers(a,e),cspm_zoom_in_and_out(a)))}),z(document).on("click","a.cspm_popup_single_post",function(e){e.preventDefault();e=z(this).attr("href");void 0!==e&&""!=e&&cspm_open_single_post_modal(e)}),z(document).on("click","a.cspm_popup_nearby_palces_map",function(e){e.preventDefault();var t=progress_map_vars.nearby_places_page_url,e=z(this).attr("data-post-id");void 0!==t&&""!=t&&void 0!==e&&""!=e&&cspm_open_single_post_modal(t+"?post_id="+e)}),cspm_convert_img_to_svg();var r={};z(document).on("click","div.kml_list_btn",function(){var a=z(this).attr("data-map-id"),s=z("div#codespacing_progress_map_div_"+a);z("div.cspm_top_element:not(.kml_list_container_"+a+")").hide(),z("div.kml_list_container_"+a).slideToggle(0,"easeOutCirc",function(){var e=z(this);z(this).is(":visible")&&void 0===r[a]&&(r[a]=tail.select(".cspm_kml_layer_list[data-map-id="+a+"]",{classNames:"cspm_custom_tailselect",multiple:!0,multiShowCount:!0,multiSelectAll:!0,startOpen:!0,stayOpen:!0,openAbove:!1,local:"en",cbComplete:function(){e.find(".tail-all").html(progress_map_vars.all),e.find(".tail-none").html(progress_map_vars.none),cspm_apply_custom_scrollabr(".cspm_custom_tailselect.tail-select .select-dropdown .dropdown-inner")}}).on("change",function(e,t){r[a].disable(!1),s.gmap3({get:{name:"kmllayer",tag:e.key,callback:function(e){void 0!==e&&"function"==typeof e.setMap&&("select"==t?(e.setMap(s.gmap3("get")),e.setOptions({preserveViewport:!1})):"unselect"==t&&e.setMap(null)),r[a].enable(!1)}}})}))})})}(jQuery);